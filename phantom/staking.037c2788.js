(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},a=n.parcelRequire1d24;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},n.parcelRequire1d24=a),a.register("6oMdZ",(function(t,n){e(t.exports,"PHANTOM_STAKE_NODE",(function(){return o})),e(t.exports,"SOL_STAKING_DOCS",(function(){return a("islf0").SOL_STAKING_DOCS})),e(t.exports,"SOL_STAKING_REWARDS_DOCS",(function(){return a("islf0").SOL_STAKING_REWARDS_DOCS})),e(t.exports,"CONVERT_TO_JITOSOL_LEARN_MORE_LINK",(function(){return a("islf0").CONVERT_TO_JITOSOL_LEARN_MORE_LINK})),e(t.exports,"UNSTAKE_JITOSOL_LINK",(function(){return a("islf0").UNSTAKE_JITOSOL_LINK})),e(t.exports,"createStakingHooks",(function(){return a("gVED6").createStakingHooks})),e(t.exports,"StakeAccountType",(function(){return a("7rWiL").StakeAccountType})),e(t.exports,"calculateTotalValidatorAPY",(function(){return a("ep0HO").calculateTotalValidatorAPY})),e(t.exports,"recommendedValidatorSorter",(function(){return a("7xt7C").recommendedValidatorSorter})),e(t.exports,"createStakeAnalytics",(function(){return a("k2NbH").createStakeAnalytics})),e(t.exports,"useGetMaxTransferrableSol",(function(){return a("cBz6V").useGetMaxTransferrableSol})),e(t.exports,"useLiquidStakingStore",(function(){return a("3s5hF").useLiquidStakingStore})),e(t.exports,"stakingShouldDehydrateQueryPredicate",(function(){return a("hvGDb").stakingShouldDehydrateQueryPredicate}));a("islf0");a("cTTnM");a("gVED6"),a("7rWiL");a("jqEmo");a("ep0HO"),a("7xt7C"),a("k2NbH"),a("ihFlu"),a("cBz6V"),a("fHWFb");a("1rRmV");a("3s5hF"),a("hvGDb");const o={identityPublicKey:"7GkMBmtrTZz8QbjSe1sXvAUtz7Pp42SQxfT5ymmJD4We",voteAccountPublicKey:"J2nUHEAgZFRyuJbFjdqPrAa9gyWDuc7hErtDQHPhsYRp"}})),a.register("islf0",(function(t,n){e(t.exports,"CONFIG_PROGRAM_ID",(function(){return u})),e(t.exports,"SOL_STAKING_DOCS",(function(){return c})),e(t.exports,"SOL_STAKING_REWARDS_DOCS",(function(){return l})),e(t.exports,"NETWORK_TO_NATIVE_FUNGIBLE",(function(){return p})),e(t.exports,"CONVERT_TO_JITOSOL_LEARN_MORE_LINK",(function(){return f})),e(t.exports,"UNSTAKE_JITOSOL_LINK",(function(){return y}));var o=a("belzv"),r=a("gYh0e"),i=a("3fvLJ"),s=a("4y59b");const u=new(0,i.PublicKey)("Config1111111111111111111111111111111111111"),c="https://docs.solana.com/staking",l="https://docs.solana.com/implemented-proposals/staking-rewards",d={type:r.FungibleTokenType.SolanaNative,data:{amount:"0",balance:new(0,s.BigNumber)(0),chain:{id:o.Chains.solana.mainnetID,imageUrl:o.Chains.solana.iconUrl,name:o.Chains.solana.name,symbol:o.Chains.solana.tokenSymbol},coingeckoId:"solana",decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:r.SpamStatus.NotVerified}},p=new Map([[o.NetworkIDs.Solana.Mainnet,d]]),f="https://www.jito.network/blog/lsts-vs-native-assets/",y="https://www.jito.network/staking/?mode=unstake"})),a.register("cTTnM",(function(t,n){e(t.exports,"createStakingHooks",(function(){return a("gVED6").createStakingHooks}));a("gVED6")})),a.register("gVED6",(function(t,n){e(t.exports,"createStakingHooks",(function(){return C}));var o=a("4raQz"),r=a("F4adS"),i=a("1Dvov"),s=a("5spRy"),u=a("2xlzY"),c=a("k6uFh"),l=a("chsS5"),d=a("gt5rg"),p=a("i6Kga"),f=a("fHWFb"),y=a("lxI2A"),k=a("aCG5w"),g=a("jRSxq"),v=a("7hUpm"),h=a("dBN2w"),S=a("f2N2q"),m=a("3nYr5"),b=a("8wC6T"),w=a("a8a7m"),A=a("gnXv2"),x=a("jkU7b"),P=a("a9TgV"),T=a("hdx8w");function C({accountSigner:e,accountHooks:t,storage:n,fungibleHooks:a,priceHooks:C,transactionHooks:I,queryClient:L,getApiEnvironment:E,stakeAnalytics:D}){const N=new(0,o.PriorityFeeService);return{useKeybaseUserAvatar:e=>(0,u.useKeybaseUserAvatar)(e),useRecommendedValidators:()=>(0,c.useRecommendedValidators)(E),useSignatureStatus:(e,t,n)=>(0,l.useSignatureStatus)(L,e,t,n),useStakeAccounts:p.useStakeAccounts,useStakeAccountMinBalance:d.useStakeAccountMinBalance,useStakeActivationData:f.useStakeActivationData,useStakeApy:()=>(0,y.useStakeApy)(E),useStakeRewardsHistory:(e,t)=>(0,k.useStakeRewardsHistory)(E,e,t),useValidators:v.useValidators,useValidatorInfo:g.useValidatorInfo,useVoteAccounts:h.useVoteAccounts,useConvertStakeAccountInfoPageProps:e=>(0,m.useConvertStakeAccountInfoPageProps)(e,t,I,E),useConvertStakeAccountReviewPageProps:e=>(0,w.useConvertStakeAccountReviewPageProps)({accountHooks:t,fungibleHooks:a,transactionHooks:I,priceHooks:C,priorityFeeService:N,navigateToStatusPage:e}),useConvertStakeAccountListPageProps:e=>(0,b.useConvertStakeAccountListPageProps)({accountHooks:t,transactionHooks:I,navigateToReviewPage:e}),useConvertStakeAccountStatusPageProps:o=>(0,A.useConvertStakeAccountStatusPageProps)(Object.assign(Object.assign({},o),{accountSigner:e,accountHooks:t,fungibleHooks:a,storage:n,transactionHooks:I,queryClient:L})),useConvertStakeBannerProps:e=>(0,x.useConvertStakeBannerProps)(Object.assign(Object.assign({},e),{accountHooks:t,transactionHooks:I,getApiEnvironment:E})),useNativeLiquidStaking:e=>(0,T.useNativeLiquidStaking)(E,e),useLiquidStakingAnalytics:()=>(0,P.useLiquidStakingAnalytics)(),useDelegateStake:e=>(0,s.useDelegateStake)(I,e,L,N,D),useCreateStakeAccountAndDelegateStake:e=>(0,r.useCreateStakeAccountAndDelegateStake)(I,e,L,N,D),useDeactivateStake:e=>(0,i.useDeactivateStake)(I,e,L,N,D),useWithdrawStake:e=>(0,S.useWithdrawStake)(I,e,L,N,D)}}})),a.register("F4adS",(function(t,n){e(t.exports,"useCreateStakeAccountAndDelegateStake",(function(){return g}),(function(e){return g=e}));var o=a("belzv"),r=a("lMzyG"),i=a("gd9Oy"),s=a("3fvLJ"),u=a("4yY1D"),c=a("4raQz"),l=a("fG04A"),d=a("24sH7");a("jqEmo");var p=a("kW76A"),f=a("5spRy"),y=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function k({lamports:e,votePubkey:t,authorizedPubkey:n}){const[o,r]=function({ownerPublicKey:e,lamports:t,transaction:n=new(0,s.Transaction)}){const o=s.Keypair.generate();return n.add(s.StakeProgram.createAccount({fromPubkey:e,stakePubkey:o.publicKey,authorized:new(0,s.Authorized)(e,e),lamports:t})),[n,o]}({ownerPublicKey:n,lamports:e});return o.add((0,f.delegateStake)({stakePubkey:r.publicKey,authorizedPubkey:n,votePubkey:t})),[o,r]}const g=(e,t,n,a,f)=>{const{t:g}=(0,r.useTranslation)(),{mutateAsync:v}=e.useSignAndSendSolanaTransactionAsync(t);return(0,l.useMutation)({mutationFn:e=>y(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,lamports:r,votePubkey:u,authorizedPubkey:l,usdPerSol:p}){if(!n)throw d.MissingSenderAddressError;const{networkID:y,address:h}=n,[S,m]=k({accountIdentifier:e,senderAddress:n,lamports:r,votePubkey:u,authorizedPubkey:l}),b=yield a.addPriorityFee(S,{connection:t}),w={ownerAddress:null!=h?h:"",networkID:y,data:{signature:""},type:c.PendingTransactionType.CreateAccountAndDelegateStake,display:{summary:{topLeft:{label:g("transactionsPendingCreatingAndDelegatingStake")}}}};f.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(y),type:"delegate"})));const A=yield v({accountIdentifier:e,feePayer:new(0,s.PublicKey)(h),transaction:b,pendingTransactionInput:w,opts:{additionalSignerAccounts:[m]}});f.then((e=>e.submittedTransaction(A,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(y),method:"signAndSendTransaction"})));const x=(0,s.lamportsToSolana)(r),P=p?x.times(p):void 0;return f.then((e=>e.createStakeAccountAndDelegateStake({sol:x.toNumber(),usd:null==P?void 0:P.toNumber(),voteAccountPubkey:u}))),{networkID:y,id:null!=A?A:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{f.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{f.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("24sH7",(function(t,n){e(t.exports,"MissingSenderAddressError",(function(){return o})),e(t.exports,"MissingConfirmationSignatureError",(function(){return r})),e(t.exports,"MissingPublicKeyError",(function(){return a})),e(t.exports,"StakingErrorCodes",(function(){return i})),e(t.exports,"StakingError",(function(){return u}));const o=new Error("Missing sender address for staking fungibles."),r=(new Error("Missing signature from staking fungibles."),new Error("Missing signature from waiting for staking transaction confirmation.")),a=new Error("PublicKey is required");var i,s;(s=i||(i={})).MissingTransactionData="MissingTransactionData",s.UnknownError="UnknownError",s.FailedToConfirmTransaction="FailedToConfirmTransaction";class u extends Error{constructor(e){super(e)}}})),a.register("jqEmo",(function(t,n){e(t.exports,"calculateTotalValidatorAPY",(function(){return a("ep0HO").calculateTotalValidatorAPY})),e(t.exports,"invalidateAllStakeAccountData",(function(){return a("kW76A").invalidateAllStakeAccountData})),e(t.exports,"recommendedValidatorSorter",(function(){return a("7xt7C").recommendedValidatorSorter}));a("ep0HO"),a("kW76A"),a("7xt7C")})),a.register("ep0HO",(function(n,o){e(n.exports,"calculateTotalValidatorAPY",(function(){return i}));var r=a("3yHS8");function i(e,n){const o=new(t(r))(e/100),a=new(t(r))(n/100);return o.minus(o.times(a)).times(100).decimalPlaces(2).toNumber()}})),a.register("kW76A",(function(t,n){e(t.exports,"invalidateAllStakeAccountData",(function(){return r}));var o=a("bZPmb");const r=e=>()=>{e.invalidateQueries({predicate:e=>{const t=t=>t.every(((t,n)=>e.queryKey[n]===t));return t(o.STAKE_ACCOUNTS_SCOPE)||t(o.STAKE_ACTIVATION_DATA_SCOPE)||t(o.CONVERT_STAKE_LIST_SCOPE)||t(o.CONVERT_STAKE_TRANSCTION_SCOPE)}})}})),a.register("bZPmb",(function(t,n){e(t.exports,"LIQUID_STAKING_QUERY_KEYS_PREFIX",(function(){return r})),e(t.exports,"STAKE_ACCOUNTS_SCOPE",(function(){return i})),e(t.exports,"STAKE_ACTIVATION_DATA_SCOPE",(function(){return s})),e(t.exports,"CONVERT_STAKE_LIST_SCOPE",(function(){return u})),e(t.exports,"CONVERT_STAKE_TRANSCTION_SCOPE",(function(){return c})),e(t.exports,"stakingQueryKeys",(function(){return l}));const o="staking";var r,a;(a=r||(r={})).convertStakeList="convertStakeAccountList",a.supportedTokens="liquidStakingSupportedTokens",a.convertStakeTransaction="convertStakeTransaction";const i=[o,"stakeAccounts"],s=[o,"stakeActivationData"],u=[o,r.convertStakeList],c=[o,r.convertStakeTransaction],l={keybaseUserAvatar:e=>[o,"keybaseUserAvatar",e],signatureStatus:e=>[o,"signatureStatus",e],stakeAccounts:(e,t)=>[...i,e,t],stakeAccountMinBalance:()=>[o,"stakeAccountMinBalance"],stakeActivationData:e=>[...s,e],stakeRewardsHistory:e=>[o,"stakeRewardsHistory",e],stakeApy:()=>[o,"stakeApy"],recommendedValidators:()=>[o,"recommendedValidators"],validatorInfo:()=>[o,"validatorInfo"],voteAccounts:e=>[o,"voteAccounts",e],convertStakeAccountList:(e,t)=>[...u,e,t],liquidStakingSupportedTokens:e=>[o,r.supportedTokens,e],getConvertStakeTransaction:e=>[...c,e]}})),a.register("7xt7C",(function(t,n){e(t.exports,"recommendedValidatorSorter",(function(){return o}));const o=e=>(t,n)=>{const o=e.indexOf(t.voteAccountPubkey),r=e.indexOf(n.voteAccountPubkey);return(o>-1?o:1/0)-(r>-1?r:1/0)}})),a.register("5spRy",(function(t,n){e(t.exports,"delegateStake",(function(){return y}),(function(e){return y=e})),e(t.exports,"useDelegateStake",(function(){return k}),(function(e){return k=e}));var o=a("belzv"),r=a("lMzyG"),i=a("gd9Oy"),s=a("3fvLJ"),u=a("4yY1D"),c=a("4raQz"),l=a("fG04A"),d=a("24sH7");a("jqEmo");var p=a("kW76A"),f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function y({stakePubkey:e,authorizedPubkey:t,votePubkey:n}){return s.StakeProgram.delegate({stakePubkey:e,authorizedPubkey:t,votePubkey:n})}const k=(e,t,n,a,k)=>{const{t:g}=(0,r.useTranslation)(),{mutateAsync:v}=e.useSignAndSendSolanaTransactionAsync(t);return(0,l.useMutation)({mutationFn:e=>f(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,authorizedPubkey:u,votePubkey:l}){if(!n)throw d.MissingSenderAddressError;const{networkID:p,address:f}=n,h=y({stakePubkey:r,authorizedPubkey:u,votePubkey:l}),S=yield a.addPriorityFee(h,{connection:t}),m={ownerAddress:null!=f?f:"",networkID:p,data:{signature:""},type:c.PendingTransactionType.DelegateStake,display:{summary:{topLeft:{label:g("transactionsPendingDelegatingStake")}}}};k.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),type:"delegate"})));const b=yield v({accountIdentifier:e,feePayer:new(0,s.PublicKey)(f),transaction:S,pendingTransactionInput:m});return k.then((e=>e.submittedTransaction(b,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),method:"signAndSendTransaction"}))),{networkID:p,id:null!=b?b:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{k.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{k.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("1Dvov",(function(t,n){e(t.exports,"useDeactivateStake",(function(){return y}),(function(e){return y=e}));var o=a("belzv"),r=a("lMzyG"),i=a("gd9Oy"),s=a("3fvLJ"),u=a("4yY1D"),c=a("4raQz"),l=a("fG04A"),d=a("24sH7");a("jqEmo");var p=a("kW76A"),f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const y=(e,t,n,a,y)=>{const{t:k}=(0,r.useTranslation)(),{mutateAsync:g}=e.useSignAndSendSolanaTransactionAsync(t);return(0,l.useMutation)({mutationFn:e=>f(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,stakeAuthorityPubkey:u,authorizedPubkey:l}){if(!n)throw d.MissingSenderAddressError;const{networkID:p,address:f}=n,v=function({stakePubkey:e,stakeAuthorityPubkey:t,authorizedPubkey:n,transaction:o=new(0,s.Transaction)}){return t.equals(n)||o.add(s.StakeProgram.authorize({authorizedPubkey:n,newAuthorizedPubkey:n,stakeAuthorizationType:s.StakeAuthorizationLayout.Staker,stakePubkey:e})),o.add(s.StakeProgram.deactivate({stakePubkey:e,authorizedPubkey:n})),o}({stakePubkey:r,stakeAuthorityPubkey:u,authorizedPubkey:l}),h=yield a.addPriorityFee(v,{connection:t}),S={ownerAddress:null!=f?f:"",networkID:p,data:{signature:""},type:c.PendingTransactionType.DeactivateStake,display:{summary:{topLeft:{label:k("transactionsPendingDeactivatingStake")}}}};y.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),type:"undelegate"})));const m=yield g({accountIdentifier:e,feePayer:new(0,s.PublicKey)(f),transaction:h,pendingTransactionInput:S});return y.then((e=>e.submittedTransaction(m,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),method:"signAndSendTransaction"}))),y.then((e=>e.deactivateStake())),{networkID:p,id:null!=m?m:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("2xlzY",(function(t,n){e(t.exports,"useKeybaseUserAvatar",(function(){return u}),(function(e){return u=e}));var o=a("lNRH9"),r=a("eXFbY"),i=a("bZPmb"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>{const t=i.stakingQueryKeys.keybaseUserAvatar(e);return(0,o.useQuery)({enabled:!!e,queryKey:t,queryFn(){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("Keybase username is required");return(0,r.getKeybaseUserAvatar)(e)}))},placeholderData:""})}})),a.register("eXFbY",(function(t,n){e(t.exports,"getKeybaseUserAvatar",(function(){return i}),(function(e){return i=e}));var o=a("8kIyR"),r=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const i=e=>r(void 0,void 0,void 0,(function*(){var t;const n=yield o.rb.get(`https://keybase.io/_/api/1.0/user/pic_url.json?username=${encodeURIComponent(e)}`);if(!(0,o.responseIsOkay)(n)||0!==(null===(t=n.data.status)||void 0===t?void 0:t.code))throw new Error("Couldn't fetch keybase user avatar");return n.data.pic_url}))})),a.register("k6uFh",(function(t,n){e(t.exports,"useRecommendedValidators",(function(){return l}),(function(e){return l=e}));var o=a("4yY1D"),r=a("lNRH9"),i=a("57CUY"),s=a("bZPmb"),u=a("dI6X1"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const l=e=>{const t=s.stakingQueryKeys.recommendedValidators();return(0,r.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getRecommendedValidators)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("57CUY",(function(t,n){e(t.exports,"getRecommendedValidators",(function(){return u}),(function(e){return u=e}));var o=a("8kIyR"),r=a("7rWiL"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch recommended staking validators.");function u(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/staking/v1/recommended`);if(!(0,o.responseIsOkay)(t))throw s;const n=t.data;return r.RecommendedValidators.parse(n).validators}catch(e){throw s}}))}})),a.register("7rWiL",(function(t,n){e(t.exports,"StakeAccountType",(function(){return o})),e(t.exports,"StakeApy",(function(){return u})),e(t.exports,"RecommendedValidators",(function(){return c})),e(t.exports,"StakingRewardsHistory",(function(){return d})),e(t.exports,"LiquidStakingSupportedTokens",(function(){return g}));var o,r,i=a("belzv"),s=a("7pPsM");(r=o||(o={})).Initialized="initialized",r.Delegated="delegated";const u=s.z.object({apy:s.z.number()}),c=s.z.object({validators:s.z.array(s.z.string())}),l=s.z.object({epoch:s.z.number(),effectiveSlot:s.z.number(),amount:s.z.number(),postBalance:s.z.number(),percentChange:s.z.number(),apr:s.z.number(),timestamp:s.z.number()}),d=s.z.object({items:s.z.array(l)}),p=s.z.object({address:s.z.string(),chainId:i.NetworkID,decimals:s.z.number(),logoURI:s.z.string(),name:s.z.string(),symbol:s.z.string()}),f=s.z.object({caip19:s.z.string(),metadata:p}),y=s.z.object({vote_account:s.z.string()}),k=s.z.object({apy:s.z.string(),chainId:i.NetworkID,convertRatio:s.z.string(),name:s.z.string(),stakePoolAddress:s.z.string(),stakePoolTokenMetadata:f,validators:s.z.array(y)}),g=s.z.record(s.z.string(),s.z.array(k))})),a.register("dI6X1",(function(t,n){e(t.exports,"CacheTime",(function(){return r})),e(t.exports,"StaleTime",(function(){return s}));var o=a("4y59b");var r,i,s,u;(i=r||(r={}))[i.Always=1/0]="Always",i[i.Short=(0,o.toMilliseconds)({days:1})]="Short",i[i.Medium=(0,o.toMilliseconds)({days:3})]="Medium",i[i.Long=(0,o.toMilliseconds)({days:7})]="Long",(u=s||(s={}))[u.Immediate=0]="Immediate",u[u.Short=(0,o.toMilliseconds)({minutes:1})]="Short",u[u.Medium=(0,o.toMilliseconds)({minutes:2.5})]="Medium",u[u.Long=(0,o.toMilliseconds)({minutes:5})]="Long",u[u.Never=1/0]="Never"})),a.register("chsS5",(function(t,n){e(t.exports,"useSignatureStatus",(function(){return c}),(function(e){return c=e}));var o=a("lNRH9"),r=a("24sH7"),i=a("bZPmb"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=(e,t)=>s(void 0,void 0,void 0,(function*(){return yield e.getSignatureStatus(t,{searchTransactionHistory:!0})}));function c(e,t,n,a){var c;const l=i.stakingQueryKeys.signatureStatus(a),d=e.getQueryData(l),p=null===(c=null==d?void 0:d.value)||void 0===c?void 0:c.confirmationStatus,f=!!a&&"finalized"!==p;return(0,o.useQuery)({queryKey:l,queryFn:()=>s(this,void 0,void 0,(function*(){if(!a)throw r.MissingConfirmationSignatureError;return yield u(t,a)})),enabled:f,refetchInterval:n})}})),a.register("gt5rg",(function(t,n){e(t.exports,"useStakeAccountMinBalance",(function(){return c}),(function(e){return c=e}));var o=a("3fvLJ"),r=a("lNRH9"),i=a("bZPmb"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>()=>s(void 0,void 0,void 0,(function*(){return yield e.getMinimumBalanceForRentExemption(o.StakeProgram.space)}));function c(e){const t=i.stakingQueryKeys.stakeAccountMinBalance(),n=u(e);return(0,r.useQuery)({queryKey:t,queryFn:n,placeholderData:0})}})),a.register("i6Kga",(function(t,n){e(t.exports,"useStakeAccounts",(function(){return p}),(function(e){return p=e}));var o=a("3fvLJ"),r=a("4yY1D"),i=a("lNRH9"),s=a("bZPmb"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const c=(e,t)=>u(void 0,void 0,void 0,(function*(){const n=[];t.ownerPublicKey&&n.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&n.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}});const a=yield e.getParsedProgramAccounts(o.StakeProgram.programId,{filters:n});let i=[];if(t.fetchInflationRewards)try{i=yield((e,t,n,...o)=>u(void 0,[e,t,n,...o],void 0,(function*(e,t,n,o="confirmed"){return yield e.getInflationReward(t,n,o)})))(e,a.map((({pubkey:e})=>e)))}catch(e){const t=e;!t.message.includes("RPC request timed out")&&r.telemetry.captureError(t,r.FeatureTag.Staking)}return a.map(((e,t)=>{var n;return Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,inflationReward:null===(n=i[t])||void 0===n?void 0:n.amount},e.account.data.parsed)}))})),l=(e,t)=>s.stakingQueryKeys.stakeAccounts(e,t),d=(e,t)=>()=>c(e,{ownerPublicKey:t,fetchInflationRewards:!0});function p(e,t){const n=l(t,e.rpcEndpoint),o=d(e,t);return(0,i.useQuery)({queryKey:n,queryFn:o,placeholderData:[]})}})),a.register("fHWFb",(function(t,n){e(t.exports,"getStakeActivationData",(function(){return c}),(function(e){return c=e})),e(t.exports,"useStakeActivationData",(function(){return l}),(function(e){return l=e}));var o=a("3fvLJ"),r=a("lNRH9"),i=a("24sH7"),s=a("bZPmb"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const c=(e,t)=>e.getStakeActivation(new(0,o.PublicKey)(t));function l(e,t){const n=s.stakingQueryKeys.stakeActivationData(t),o=!!t;return(0,r.useQuery)({queryKey:n,queryFn:()=>u(this,void 0,void 0,(function*(){if(!t)throw i.MissingPublicKeyError;return yield c(e,t)})),enabled:o})}})),a.register("lxI2A",(function(t,n){e(t.exports,"useStakeApy",(function(){return l}),(function(e){return l=e}));var o=a("4yY1D"),r=a("lNRH9"),i=a("2efEo"),s=a("bZPmb"),u=a("dI6X1"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const l=e=>{const t=s.stakingQueryKeys.stakeApy();return(0,r.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getStakingApy)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("2efEo",(function(t,n){e(t.exports,"getStakingApy",(function(){return u}),(function(e){return u=e}));var o=a("8kIyR"),r=a("7rWiL"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch staking APY");function u(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/staking/v1/apy`);if(!(0,o.responseIsOkay)(t))throw s;const n=t.data;return r.StakeApy.parse(n).apy}catch(e){throw s}}))}})),a.register("aCG5w",(function(t,n){e(t.exports,"useStakeRewardsHistory",(function(){return l}),(function(e){return l=e}));var o=a("4yY1D"),r=a("tv9Be"),i=a("7yHq5"),s=a("bZPmb"),u=a("dI6X1"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function l(e,t,n,a=2){const l=s.stakingQueryKeys.stakeRewardsHistory(t);return(0,r.useInfiniteQuery)({retry:a,enabled:!!t&&!!n,queryKey:l,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn:o=>c(this,[o],void 0,(function*({pageParam:o}){const r=o?{address:t,chainId:n,epoch:o}:{address:t,chainId:n};return(0,i.getStakingRewardsHistory)(e(),r)})),getNextPageParam:({items:e})=>e.length?e[e.length-1].epoch:null,onError:e=>o.telemetry.captureError(e,o.FeatureTag.Staking)})}})),a.register("tv9Be",(function(t,n){e(t.exports,"useInfiniteQuery",(function(){return s}));var o=a("bUcw9"),r=a("23gDC"),i=a("fMZKM");function s(e,t,n){const a=(0,r.parseQueryArgs)(e,t,n);return(0,i.useBaseQuery)(a,o.InfiniteQueryObserver)}})),a.register("bUcw9",(function(t,n){e(t.exports,"InfiniteQueryObserver",(function(){return i}));var o=a("f4Jbh"),r=a("8dVOS");class i extends o.QueryObserver{bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,r.infiniteQueryBehavior)()},t)}getOptimisticResult(e){return e.behavior=(0,r.infiniteQueryBehavior)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,o,a,i,s,u;const{state:c}=e;return{...super.createResult(e,t),fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,r.hasNextPage)(t,null==(n=c.data)?void 0:n.pages),hasPreviousPage:(0,r.hasPreviousPage)(t,null==(o=c.data)?void 0:o.pages),isFetchingNextPage:"fetching"===c.fetchStatus&&"forward"===(null==(a=c.fetchMeta)||null==(i=a.fetchMore)?void 0:i.direction),isFetchingPreviousPage:"fetching"===c.fetchStatus&&"backward"===(null==(s=c.fetchMeta)||null==(u=s.fetchMore)?void 0:u.direction)}}constructor(e,t){super(e,t)}}})),a.register("8dVOS",(function(t,n){function o(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,o,i,s,u;const c=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,l=null==(o=e.fetchOptions)||null==(i=o.meta)?void 0:i.fetchMore,d=null==l?void 0:l.pageParam,p="forward"===(null==l?void 0:l.direction),f="backward"===(null==l?void 0:l.direction),y=(null==(s=e.state.data)?void 0:s.pages)||[],k=(null==(u=e.state.data)?void 0:u.pageParams)||[];let g=k,v=!1;const h=e.options.queryFn||(()=>Promise.reject("Missing queryFn")),S=(e,t,n,o)=>(g=o?[t,...g]:[...g,t],o?[n,...e]:[...e,n]),m=(t,n,o,r)=>{if(v)return Promise.reject("Cancelled");if(void 0===o&&!n&&t.length)return Promise.resolve(t);const a={queryKey:e.queryKey,pageParam:o,meta:e.meta};var i;i=a,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?v=!0:null==(n=e.signal)||n.addEventListener("abort",(()=>{v=!0})),e.signal}});const s=h(a);return Promise.resolve(s).then((e=>S(t,o,e,r)))};let b;if(y.length)if(p){const t=void 0!==d,n=t?d:r(e.options,y);b=m(y,t,n)}else if(f){const t=void 0!==d,n=t?d:a(e.options,y);b=m(y,t,n,!0)}else{g=[];const t=void 0===e.options.getNextPageParam;b=!c||!y[0]||c(y[0],0,y)?m([],t,k[0]):Promise.resolve(S([],k[0],y[0]));for(let n=1;n<y.length;n++)b=b.then((o=>{if(!c||!y[n]||c(y[n],n,y)){const a=t?k[n]:r(e.options,o);return m(o,t,a)}return Promise.resolve(S(o,k[n],y[n]))}))}else b=m([]);return b.then((e=>({pages:e,pageParams:g})))}}}}function r(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function a(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}function i(e,t){if(e.getNextPageParam&&Array.isArray(t)){const n=r(e,t);return null!=n&&!1!==n}}function s(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const n=a(e,t);return null!=n&&!1!==n}}e(t.exports,"infiniteQueryBehavior",(function(){return o})),e(t.exports,"hasNextPage",(function(){return i})),e(t.exports,"hasPreviousPage",(function(){return s}))})),a.register("7yHq5",(function(t,n){e(t.exports,"getStakingRewardsHistory",(function(){return u}),(function(e){return u=e}));var o=a("8kIyR"),r=a("7rWiL"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch staking rewards history");function u(e,t){return i(this,void 0,void 0,(function*(){let n;try{n=yield o.rb.post(`${e}/staking/v1/history`,t)}catch(e){throw s}if(!(0,o.responseIsOkay)(n))throw s;const a=n.data,i=r.StakingRewardsHistory.safeParse(a);if(i.success)return i.data;throw s}))}})),a.register("jRSxq",(function(t,n){e(t.exports,"useValidatorInfo",(function(){return c}),(function(e){return c=e}));var o=a("lNRH9"),r=a("islf0"),i=a("bZPmb"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>()=>s(void 0,void 0,void 0,(function*(){return(yield e.getParsedProgramAccounts(r.CONFIG_PROGRAM_ID)).reduce(((e,t)=>{var n;if("validatorInfo"!==(null===(n=t.account.data.parsed)||void 0===n?void 0:n.type))return e;const o=t.pubkey.toString(),r=t.account.data.parsed.info.keys,[,a]=r;if(!a.signer)return e;const i=a.pubkey,s=t.account.data.parsed.info.configData;return e.push({identityPubkey:i,infoPubkey:o,info:s}),e}),[])}));function c(e){const t=i.stakingQueryKeys.validatorInfo(),n=u(e);return(0,o.useQuery)({queryKey:t,queryFn:n,placeholderData:[]})}})),a.register("7hUpm",(function(t,n){e(t.exports,"useValidators",(function(){return c}),(function(e){return c=e}));var o=a("lDSNw"),r=a("kkkNB"),i=a("jRSxq"),s=a("dBN2w"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function c(e){const{isFetched:t,isFetching:n,isLoading:a,isSuccess:c,isError:l,dataUpdatedAt:d,errorUpdatedAt:p,error:f,refetch:y,data:k}=(0,s.useVoteAccounts)(e),g=Math.max(d,p),{isFetched:v,isFetching:h,isLoading:S,isSuccess:m,isError:b,dataUpdatedAt:w,errorUpdatedAt:A,error:x,refetch:P,data:T}=(0,i.useValidatorInfo)(e),C=Math.max(w,A),I=Math.max(g,C),L=t&&v,E=n||h,D=c||m,N=l||b,O=f||x,M=a||S,F=(0,o.useCallback)((()=>u(this,void 0,void 0,(function*(){Promise.all([y(),P()])}))),[P,y]);return{results:(0,o.useMemo)((()=>{if(!k)return[];if(!T)return[];const e=(0,r.sortVoteAccounts)(k),t=new Map(e.map((e=>[e.identityPubkey,e]))),n=new Map(T.map((e=>[e.identityPubkey,e]))),o=[];for(const[e,r]of t){const t=n.get(e);o.push(Object.assign(Object.assign({},r),t))}return o}),[T,k]),dataUpdatedAt:I,error:O,isSuccess:D,isError:N,isFetched:L,isFetching:E,isLoading:M,refetch:F}}})),a.register("kkkNB",(function(t,n){e(t.exports,"sortVoteAccounts",(function(){return r}));const o=(e,t)=>e+t[1];function r(e){const t=function(e){const t={maxEpochCredits:0,maxActivatedStake:0};for(const n of e){const e=n.epochCredits.reduce(o,0);t.maxEpochCredits<e&&(t.maxEpochCredits=e),t.maxActivatedStake<n.activatedStake&&(t.maxActivatedStake=n.activatedStake)}return t}(e),n=function(e,t,n){return(o,r)=>{const i=a(o,e,t,n);return a(r,e,t,n)-i}}(t.maxEpochCredits,t.maxActivatedStake,{commissionWeight:.6,epochCreditsWeight:.3,activatedStakeWeight:.1});return e.sort(n)}function a(e,t,n,r){const{commission:a,epochCredits:i,activatedStake:s}=e,{commissionWeight:u,epochCreditsWeight:c,activatedStakeWeight:l}=r,{normalizedCommission:d,normalizedEpochCredits:p,normalizedActivatedStake:f}=function(e,t,n,o,r){return{normalizedCommission:(100-e)/100,normalizedEpochCredits:t/n,normalizedActivatedStake:Math.log10(o+1)/Math.log10(r+1)}}(a,i.reduce(o,0),t,s,n);return(a>10?.5:1)*(u*d+c*p+l*f)}})),a.register("dBN2w",(function(t,n){e(t.exports,"useVoteAccounts",(function(){return u}),(function(e){return u=e}));var o=a("lNRH9"),r=a("bZPmb"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=e=>i(void 0,void 0,void 0,(function*(){const t=yield e.getVoteAccounts();return[...t.current,...t.delinquent].map((e=>({identityPubkey:e.nodePubkey,voteAccountPubkey:e.votePubkey,commission:e.commission,lastVote:e.lastVote,epochCredits:e.epochCredits,activatedStake:e.activatedStake}))).filter((e=>e.commission<99))}));function u(e){const t=r.stakingQueryKeys.voteAccounts(e.rpcEndpoint);return(0,o.useQuery)({queryKey:t,queryFn:()=>i(this,void 0,void 0,(function*(){return s(e)})),placeholderData:[]})}})),a.register("f2N2q",(function(t,n){e(t.exports,"useWithdrawStake",(function(){return y}),(function(e){return y=e}));var o=a("belzv"),r=a("lMzyG"),i=a("gd9Oy"),s=a("3fvLJ"),u=a("4yY1D"),c=a("4raQz"),l=a("fG04A"),d=a("24sH7");a("jqEmo");var p=a("kW76A"),f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const y=(e,t,n,a,y)=>{const{t:k}=(0,r.useTranslation)(),{mutateAsync:g}=e.useSignAndSendSolanaTransactionAsync(t);return(0,l.useMutation)({mutationFn:e=>f(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,authorizedPubkey:u,amount:l}){if(!n)throw d.MissingSenderAddressError;const{networkID:p,address:f}=n,v=function({stakePubkey:e,authorizedPubkey:t,amount:n,transaction:o=new(0,s.Transaction)}){return o.add(s.StakeProgram.withdraw({stakePubkey:e,authorizedPubkey:t,toPubkey:t,lamports:n})),o}({stakePubkey:r,authorizedPubkey:u,amount:l}),h=yield a.addPriorityFee(v,{connection:t}),S={ownerAddress:null!=f?f:"",networkID:p,data:{signature:""},type:c.PendingTransactionType.WithdrawStake,display:{summary:{topLeft:{label:k("transactionsPendingWithdrawingStake")}}}};y.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),type:"withdraw"})));const m=yield g({accountIdentifier:e,feePayer:new(0,s.PublicKey)(f),transaction:h,pendingTransactionInput:S});return y.then((e=>e.submittedTransaction(m,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),method:"signAndSendTransaction"}))),{networkID:p,id:null!=m?m:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("3nYr5",(function(t,n){e(t.exports,"useConvertStakeAccountInfoPageProps",(function(){return d}));var o=a("belzv"),r=a("gd9Oy"),i=a("lDSNw"),s=a("ihFlu"),u=a("7hUpm"),c=a("a9TgV"),l=a("hdx8w");const d=(e,t,n,a)=>{var d;const{connection:p}=n.useSelectedSolanaConnection(),{data:f}=t.useSelectedChainAddress(r.AddressType.Solana),{initConvertStake:y}=(0,l.useNativeLiquidStaking)(a,o.Chains.solana.mainnetID),{trackConvertModalContinue:k,trackConvertModalNotNow:g}=(0,c.useLiquidStakingAnalytics)(),{results:v,isFetched:h}=(0,u.useValidators)(p),S=(0,i.useMemo)((()=>new Map(v.map((e=>[e.voteAccountPubkey,e])))),[v]),m=(0,s.usePrefetchConvertStakeAccountList)(p,null!==(d=null==f?void 0:f.address)&&void 0!==d?d:"",S,h);return(0,i.useEffect)((()=>{m()}),[m]),(0,i.useEffect)((()=>{y(e)}),[e,y]),{trackConvertModalContinue:k,trackConvertModalNotNow:g}}})),a.register("ihFlu",(function(t,n){e(t.exports,"useConvertStakeAccountList",(function(){return k}),(function(e){return k=e})),e(t.exports,"usePrefetchConvertStakeAccountList",(function(){return g}),(function(e){return g=e}));var o=a("3fvLJ"),r=a("lNRH9"),i=a("fvKRK"),s=a("lDSNw"),u=a("eXFbY"),c=a("bZPmb"),l=a("fHWFb"),d=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const p=(e,t,n)=>d(void 0,void 0,void 0,(function*(){const r=(e=>{const t=[];return e.ownerPublicKey&&t.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&t.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}}),t})(t),a=yield e.getParsedProgramAccounts(o.StakeProgram.programId,{filters:r}),i=(yield Promise.allSettled(a.map((t=>(0,l.getStakeActivationData)(e,t.pubkey.toString()))))).map((e=>{if("fulfilled"===e.status)return e.value.state})),s=(yield Promise.allSettled(a.map((e=>{var t,o,r;const a=null===(t=e.account.data.parsed.info)||void 0===t?void 0:t.stake.delegation.voter,i=n.get(a),s=null===(o=null==i?void 0:i.info)||void 0===o?void 0:o.keybaseUsername,c=null===(r=null==i?void 0:i.info)||void 0===r?void 0:r.iconUrl;return c?new Promise((e=>e(c))):s?(0,u.getKeybaseUserAvatar)(s):new Promise((e=>e(null)))})))).map((e=>{if("fulfilled"===e.status&&null!==e.value)return e.value}));return a.map(((e,t)=>Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,activationState:i[t],imageUri:s[t]},e.account.data.parsed)))})),f=(e,t)=>c.stakingQueryKeys.convertStakeAccountList(e,t),y=(e,t,n)=>()=>p(e,{ownerPublicKey:t},n);function k(e,t,n,o=!0){const a=f(t,e.rpcEndpoint),i=y(e,t,n);return(0,r.useQuery)({queryKey:a,queryFn:i,enabled:!!t&&o})}const g=(e,t,n,o)=>{const r=(0,i.useQueryClient)();return(0,s.useCallback)((()=>d(void 0,void 0,void 0,(function*(){o&&(yield r.prefetchQuery(f(t,e.rpcEndpoint),(()=>p(e,{ownerPublicKey:t},n))))}))),[r,t,e,n,o])}})),a.register("a9TgV",(function(t,n){e(t.exports,"useLiquidStakingAnalytics",(function(){return c}));var o=a("9ktGj"),r=a("belzv"),i=a("gd9Oy"),s=a("lDSNw");let u=null;const c=()=>{const e=(0,o.useAnalytics)(),t=(e=>{if(!u&&e){const t="liquidStake";u=new(0,o.SequenceAnalytics)(e,t)}if(!u)throw new Error("liquidStakeAnalytics was not properly configured");return u})(e),n=(0,s.useCallback)(((t,n)=>{e.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:t,stakeAccountBalance:n}}})}),[e]),a=(0,s.useCallback)((t=>{e.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:t}}})}),[e]),c=(0,s.useCallback)((()=>{e.capture("liquidStakingConvertBannerClicked")}),[e]),l=(0,s.useCallback)((()=>{e.capture("liquidStakingConvertBannerSeen")}),[e]),d=(0,s.useCallback)((()=>{e.capture("liquidStakingConvertModalContinue")}),[e]),p=(0,s.useCallback)((()=>{e.capture("liquidStakingConvertModalNotNow")}),[e]),f=(0,s.useCallback)(((t,n,o,r,a,i)=>{e.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:null==t?void 0:t.stakePoolAddress,token:null==t?void 0:t.stakePoolTokenMetadata.metadata.name,fromAmount:o,toAmount:r,fromAmountUSD:a,toAmountUSD:i,apy:null==t?void 0:t.apy,convertRatio:null==t?void 0:t.convertRatio,caip19:null==t?void 0:t.stakePoolTokenMetadata.caip19,validatorName:null==n?void 0:n.validatorName,stakeAccountBalance:null==n?void 0:n.amount}}})}),[e]),y=(0,s.useCallback)((e=>{t.submittedTransaction(e,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:"mainnet",method:"signAndSendTransaction"})}),[t]),k=(0,s.useCallback)(((t,n)=>{e.capture("liquidStakingConvertSuccess",{data:{stake:{apy:null==n?void 0:n.apy,convertRatio:null==n?void 0:n.convertRatio,caip19:null==n?void 0:n.stakePoolTokenMetadata.caip19,stakePoolAddress:null==n?void 0:n.stakePoolAddress,token:null==n?void 0:n.stakePoolTokenMetadata.metadata.name,totalAmount:null==t?void 0:t.amount,validatorName:null==t?void 0:t.validatorName}}})}),[e]);return{trackConvertStakeAccountClicked:n,trackConvertStakeAccountListSeen:a,trackConvertBannerClicked:c,trackConvertBannerSeen:l,trackConvertModalContinue:d,trackConvertModalNotNow:p,trackConvertApprovedByUser:f,trackConvertFailed:(0,s.useCallback)((t=>{e.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:null==t?void 0:t.validatorName,stakeAccountBalance:null==t?void 0:t.amount}}})}),[e]),trackConvertSubmitted:y,trackConvertSuccess:k,trackConvertMoreClicked:(0,s.useCallback)((()=>{e.capture("liquidStakingConvertMoreClicked")}),[e]),trackUnstakeOptionSelected:(0,s.useCallback)((()=>{e.capture("liquidStakingUnstakeOptionSelected")}),[e])}}})),a.register("hdx8w",(function(t,n){e(t.exports,"useNativeLiquidStaking",(function(){return i}));var o=a("islf0"),r=a("29xqG");const i=(e,t)=>{const n=o.NETWORK_TO_NATIVE_FUNGIBLE.get(t);return(0,r.useLiquidStaking)(e,n)}})),a.register("29xqG",(function(t,n){e(t.exports,"useLiquidStaking",(function(){return c}));var o=a("belzv"),r=a("gYh0e"),i=a("lDSNw"),s=a("3T103");a("1rRmV");var u=a("3s5hF");const c=(e,t)=>{const n=(0,u.useLiquidStakingStore)((e=>e.setProvider)),a=(0,u.useLiquidStakingStore)((e=>e.setFungibleToStake)),c=(0,u.useLiquidStakingStore)((e=>e.setSkipDismissRouting)),l=(0,i.useMemo)((()=>t?(0,o.encodeCaip19)((0,r.getFungibleCaip19FromFungible)(t)):""),[t]),{data:d={},isLoading:p}=(0,s.useLiquidStakingSupportedTokens)(e),f=(0,i.useMemo)((()=>{var e;return null!==(e=d[l])&&void 0!==e?e:[]}),[l,d]),y=(0,i.useCallback)((e=>{const o=f?f[0]:void 0;o&&t&&(a(t),n(o),c(e))}),[t,f,a,n,c]);return{isLoading:p,isSupported:f.length>0,providers:f,initConvertStake:y}}})),a.register("3T103",(function(t,n){e(t.exports,"useLiquidStakingSupportedTokens",(function(){return l}),(function(e){return l=e}));var o=a("4yY1D"),r=a("lNRH9"),i=a("lBXxP"),s=a("bZPmb"),u=a("dI6X1"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const l=e=>{const t=s.stakingQueryKeys.liquidStakingSupportedTokens(e());return(0,r.useQuery)({queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return yield(0,i.getLiquidStakingSupportedTokens)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("lBXxP",(function(t,n){e(t.exports,"getLiquidStakingSupportedTokens",(function(){return c}),(function(e){return c=e}));var o=a("8kIyR"),r=a("7rWiL"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch liquid staking supported tokens"),u=new Error("Missing supported tokens in response");function c(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/liquid-staking/v1/supported-tokens`);if(!(0,o.responseIsOkay)(t))throw s;const n=r.LiquidStakingSupportedTokens.safeParse(t.data.supportedTokens);if(!n.success)throw u;return n.data}catch(e){throw s}}))}})),a.register("1rRmV",(function(t,n){e(t.exports,"useLiquidStakingStore",(function(){return a("3s5hF").useLiquidStakingStore}));a("3s5hF")})),a.register("3s5hF",(function(n,o){e(n.exports,"useLiquidStakingStore",(function(){return s}));var r=a("9xrNA");const i={transactionData:void 0,fungibleToStake:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",amount:"",validatorName:""},eligibleAccountsCount:0,navigateTo:null,skipDismissRouting:void 0},s=t(r)((e=>Object.assign(Object.assign({},i),{resetStaking:()=>e(i),setTransactionData:t=>e({transactionData:t}),setFungibleToStake:t=>e({fungibleToStake:t}),setProvider:t=>e({provider:t}),setConvertStakeAccount:t=>e({convert:t}),setEligibleAccountsCount:t=>e({eligibleAccountsCount:t}),setNavigateTo:t=>e({navigateTo:t}),setSkipDismissRouting:t=>e({skipDismissRouting:t})})))})),a.register("8wC6T",(function(t,n){e(t.exports,"useConvertStakeAccountListPageProps",(function(){return p}));var o=a("6Tvfa"),r=a("gd9Oy"),i=a("lDSNw"),s=a("ihFlu"),u=a("7hUpm");a("1rRmV");var c=a("3s5hF"),l=a("7rWiL"),d=a("a9TgV");const p=({accountHooks:e,transactionHooks:t,navigateToReviewPage:n})=>{var o,a,l;const p=(0,c.useLiquidStakingStore)((e=>e.setConvertStakeAccount)),y=(0,c.useLiquidStakingStore)((e=>e.setEligibleAccountsCount)),k=(0,c.useLiquidStakingStore)((e=>e.fungibleToStake)),g=(0,c.useLiquidStakingStore)((e=>e.provider)),v=null==g?void 0:g.validators,{connection:h}=t.useSelectedSolanaConnection(),{data:S}=e.useSelectedChainAddress(r.AddressType.Solana),{results:m,isFetched:b,isError:w}=(0,u.useValidators)(h),A=(0,i.useMemo)((()=>new Map(m.map((e=>[e.voteAccountPubkey,e])))),[m]),{trackConvertStakeAccountClicked:x,trackConvertStakeAccountListSeen:P}=(0,d.useLiquidStakingAnalytics)(),{data:T,isLoading:C,isFetching:I,error:L,refetch:E}=(0,s.useConvertStakeAccountList)(h,null!==(o=null==S?void 0:S.address)&&void 0!==o?o:"",A,b||w),D=C||I,N=(0,i.useMemo)((()=>v?new Map(v.map((e=>[e.vote_account,e]))):new Map),[v]),O=(0,i.useMemo)((()=>D||!T?[]:T.slice().map((e=>f(e,A,N))).sort(((e,t)=>e.lamports>t.lamports?-1:1))),[D,T,A,N]),M=(0,i.useMemo)((()=>O.filter((e=>e.eligible))),[O]),F=(0,i.useMemo)((()=>O.filter((e=>!e.eligible))),[O]);(0,i.useEffect)((()=>{D||P(O.map((e=>({title:e.title,amount:e.amount,eligible:e.eligible}))))}),[P,O,D]);const R=(0,i.useCallback)((e=>{var t,o,r,a,i,s;const u=null!==(a=null===(r=null===(o=null===(t=null==e?void 0:e.info)||void 0===t?void 0:t.stake)||void 0===o?void 0:o.delegation)||void 0===r?void 0:r.voter)&&void 0!==a?a:"",c=`${null!==(i=null==e?void 0:e.lamports)&&void 0!==i?i:"0"}`,l=null!==(s=null==e?void 0:e.title)&&void 0!==s?s:"";p({validatorVote:u,amount:c,stakeAccount:e.pubkey,validatorName:l}),y(M.length),x(l,c),n()}),[x,M.length,n,p,y]),_=(0,i.useCallback)((()=>{E()}),[E]);return{isLoading:D,error:L,eligibleStakeAccounts:M,inelegibleStakeAccounts:F,onReload:_,onSelectStakeAccount:R,tokenSymbol:null!==(a=null==k?void 0:k.data.symbol)&&void 0!==a?a:"",tokenDecimals:null!==(l=null==k?void 0:k.data.decimals)&&void 0!==l?l:0}},f=(e,t,n)=>{const o=y(e,n),r=k(e,t),a=e.lamports;return Object.assign(Object.assign({},e),{amount:a,eligible:o,title:r,imageUri:e.imageUri})},y=(e,t)=>{var n,o,r,a;if(e.type===l.StakeAccountType.Initialized)return!1;const i=null!==(a=null===(r=null===(o=null===(n=null==e?void 0:e.info)||void 0===n?void 0:n.stake)||void 0===o?void 0:o.delegation)||void 0===r?void 0:r.voter)&&void 0!==a?a:"";return"active"===e.activationState&&t.has(i)},k=(e,t)=>{var n,r,a;let i="";if(e.type===l.StakeAccountType.Delegated){const{voter:s}=e.info.stake.delegation,u=t.get(s),c=null===(n=null==u?void 0:u.info)||void 0===n?void 0:n.keybaseUsername,l=null===(r=null==u?void 0:u.info)||void 0===r?void 0:r.name;i=null!==(a=null!=l?l:c)&&void 0!==a?a:(0,o.formatHashMedium)(s)}else e.type===l.StakeAccountType.Initialized&&(i=e.pubkey);return i}})),a.register("a8a7m",(function(t,n){e(t.exports,"useConvertStakeAccountReviewPageProps",(function(){return v}));var o=a("belzv"),r=a("gYh0e"),i=a("lMzyG"),s=a("gd9Oy"),u=a("a0t1u"),c=a("4y59b"),l=a("lDSNw"),d=a("3hXYZ");a("1rRmV");var p=a("3s5hF"),f=a("a9TgV"),y=a("eJfec");const k=(e,t,n,a)=>{var s,l;if(!t||!n||!e)return null;const d=((e,t)=>{if(!e||!t)return(0,c.BigNumber)(0);const n=new(0,c.BigNumber)(e.amount),o=new(0,c.BigNumber)(t.convertRatio);return(0,c.amountToUiAmount)(n,t.stakePoolTokenMetadata.metadata.decimals).div(o)})(n,t),p=a?a[t.stakePoolTokenMetadata.caip19]:void 0,f=(null==p?void 0:p.usd)?d.multipliedBy(p.usd):null;return{amount:(0,u.formatTokenAmountGreaterThan1)(d),amountUsd:f?`$${(0,u.formatTokenAmountGreaterThan1)(f)}`:"",border:!1,network:{id:null!==(s=t.stakePoolTokenMetadata.metadata.chainId)&&void 0!==s?s:o.SolanaNetworkID.Mainnet,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},logoUri:null!==(l=t.stakePoolTokenMetadata.metadata.logoURI)&&void 0!==l?l:null,symbol:t.stakePoolTokenMetadata.metadata.symbol,title:i.i18next.t("convertStakeReviewYouReceive"),tokenAddress:t.stakePoolTokenMetadata.metadata.address,tokenType:r.FungibleTokenType.SPL}},g=({fungibleToStake:e,convertDetails:t,provider:n,selectedChainAddress:o,transactionFees:a,isLoading:s,canConvert:d,priceMap:p,networkFeeErrorMsg:f})=>{var y,g,v;const h=(0,l.useMemo)((()=>((e,t,n)=>{var o,a;if(!e||!t)return null;const s=(0,c.amountToUiAmount)(t.amount,e.data.decimals),l=(0,u.extractPrice)(e,n),d=(null==l?void 0:l.usd)?s.multipliedBy(l.usd):null;return{amount:(0,u.formatTokenAmountGreaterThan1)(s),amountUsd:d?`$${(0,u.formatTokenAmountGreaterThan1)(d)}`:"",border:!1,logoUri:null!==(o=e.data.logoUri)&&void 0!==o?o:null,network:{id:e.data.chain.id,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},symbol:e.data.symbol,tokenAddress:e.data.tokenAddress,tokenType:null!==(a=e.type)&&void 0!==a?a:r.FungibleTokenType.SolanaNative,title:i.i18next.t("convertStakeReviewYouPay")}})(e,t,p)),[e,t,p]),S=(0,l.useMemo)((()=>k(e,n,t,p)),[e,n,t,p]),m=null!==(y=null==n?void 0:n.name)&&void 0!==y?y:"";return{payAsset:h,receiveAsset:S,account:null!==(g=null==o?void 0:o.address)&&void 0!==g?g:"",providerName:m,apy:void 0!==(null==n?void 0:n.apy)?(0,c.formatPercentage)(Number.parseFloat(n.apy)):"",networkFee:`${(0,r.formatAmount)((0,c.amountToUiAmount)(a,null!==(v=null==e?void 0:e.data.decimals)&&void 0!==v?v:0))} ${null==e?void 0:e.data.symbol}`,accountLabelText:i.i18next.t("stakeReviewAccount"),providerLabelText:i.i18next.t("convertStakeReviewProvider"),apyLabelText:i.i18next.t("stakeReviewAPY"),networkFeeLabelText:i.i18next.t("convertStakeReviewNetworkFee"),primaryButtonText:i.i18next.t("commandConvert"),isLoading:s,canConvert:d,networkFeeErrorMsg:f}},v=({accountHooks:e,fungibleHooks:t,transactionHooks:n,priceHooks:a,priorityFeeService:i,navigateToStatusPage:u})=>{var c,k,v,h,S;const{data:m}=e.useSelectedChainAddress(s.AddressType.Solana),{trackConvertApprovedByUser:b}=(0,f.useLiquidStakingAnalytics)(),w=(0,p.useLiquidStakingStore)((e=>e.fungibleToStake)),A=(0,p.useLiquidStakingStore)((e=>e.convert)),x=(0,p.useLiquidStakingStore)((e=>e.provider)),P=(0,p.useLiquidStakingStore)((e=>e.setTransactionData)),{connection:T}=n.useSelectedSolanaConnection(),{fungible:C,isLoadingTokens:I}=t.useGetFungibleBalance({key:(null==x?void 0:x.stakePoolTokenMetadata.metadata.address)||""}),L=C?(0,r.parseOwnerAddress)(C):void 0,{data:E,isLoading:D}=(0,d.useGetConvertStakeAccountTransaction)({connection:T,networkId:null!==(c=null==x?void 0:x.chainId)&&void 0!==c?c:o.Chains.solana.mainnetID,stakePoolAddress:null!==(k=null==x?void 0:x.stakePoolAddress)&&void 0!==k?k:"",ownerAddress:null!==(v=null==m?void 0:m.address)&&void 0!==v?v:"",validatorVoteAddress:null!==(h=null==A?void 0:A.validatorVote)&&void 0!==h?h:"",stakeAccountAddress:null!==(S=null==A?void 0:A.stakeAccount)&&void 0!==S?S:"",poolTokenAccountAddress:L,priorityFeeService:i}),{isLoading:N,hasSufficientFunds:O,transactionFees:M,networkFeeErrorMsg:F}=(0,y.useLiquidStakingTransactionFees)({chainAddress:m,fungibleHooks:t,transactionData:E,transactionHooks:n}),R=(0,l.useMemo)((()=>{var e;const t=[],n=w?(0,r.getFungibleCaip19FromFungible)(w):void 0,a=(0,o.decodeCaip19)(null!==(e=null==x?void 0:x.stakePoolTokenMetadata.caip19)&&void 0!==e?e:"");return n&&a&&(t.push(n),t.push(a)),{query:{data:t}}}),[w,x]),{data:_}=a.usePrices(R),K=D||N||I,q=g({fungibleToStake:w,convertDetails:A,provider:x,selectedChainAddress:m,transactionFees:M,isLoading:K,canConvert:!K&&!!E&&"insufficient"!==O&&!F,priceMap:_,networkFeeErrorMsg:F}),U=(0,l.useCallback)((()=>{var e,t,n,o;b(x,A,null===(e=q.payAsset)||void 0===e?void 0:e.amount,null===(t=q.receiveAsset)||void 0===t?void 0:t.amount,null===(n=q.payAsset)||void 0===n?void 0:n.amountUsd,null===(o=q.receiveAsset)||void 0===o?void 0:o.amountUsd),P(E),u()}),[u,P,E,b,A,x,q]);return Object.assign(Object.assign({},q),{onPrimaryButtonPress:U})}})),a.register("3hXYZ",(function(t,n){e(t.exports,"useGetConvertStakeAccountTransaction",(function(){return l}),(function(e){return l=e}));var o=a("belzv"),r=a("4yY1D"),i=a("lNRH9");a("2UpVW");var s=a("kR509"),u=a("bZPmb"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const l=e=>{const t=u.stakingQueryKeys.getConvertStakeTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,validatorVoteAddress:e.validatorVoteAddress,stakeAccountAddress:e.stakeAccountAddress,poolTokenAccountAddress:e.poolTokenAccountAddress}),n=!!(e.stakePoolAddress&&e.ownerAddress&&e.validatorVoteAddress&&e.stakeAccountAddress);return(0,i.useQuery)({enabled:n,queryKey:t,queryFn(){return c(this,void 0,void 0,(function*(){if(o.Chains.isSolanaNetworkID(e.networkId)){const{transaction:t,signers:n}=yield(0,s.getConvertStakeAccountTransaction)(e);return{networkID:e.networkId,transaction:t,signers:n}}throw new Error(`Unsupported networkId: ${e.networkId}`)}))},onError(e){r.telemetry.captureError(e,r.FeatureTag.Staking)}})}})),a.register("2UpVW",(function(t,n){e(t.exports,"getConvertStakeAccountTransaction",(function(){return a("kR509").getConvertStakeAccountTransaction}));a("kR509")})),a.register("kR509",(function(t,n){e(t.exports,"getConvertStakeAccountTransaction",(function(){return l}),(function(e){return l=e}));var o=a("belzv"),r=a("3fvLJ"),i=a("4raQz"),s=a("5P0il"),u=a("cqMZT"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const l=e=>c(void 0,[e],void 0,(function*({connection:e,stakePoolAddress:t,ownerAddress:n,validatorVoteAddress:a,stakeAccountAddress:c,poolTokenAccountAddress:l,priorityFeeService:d}){const p=new(0,r.PublicKey)(t),f=new(0,r.PublicKey)(n),y=new(0,r.PublicKey)(a),k=new(0,r.PublicKey)(c),g=l?new(0,r.PublicKey)(l):void 0,v=new(0,r.PublicKey)((0,s.getReferralAccount)(n)),{instructions:h,signers:S}=yield(0,u.depositStake)(e,p,f,y,k,g,v),m=(yield e.getLatestBlockhash("confirmed")).blockhash,b=new(0,r.VersionedTransaction)(new(0,r.TransactionMessage)({instructions:h,payerKey:f,recentBlockhash:m}).compileToV0Message());return{transaction:yield d.addPriorityFee(b,{connection:(0,i.createConnectionBySolanaNetworkID)(o.NetworkIDs.Solana.Mainnet),calculators:{cost:i.BACKEND_FEE_CALCULATOR,budget:new(0,i.ComputeOptimizedLimitCalculator)(i.DEFAULT_COMPUTE_UNITS_PER_IX,i.DEFAULT_COMPUTE_UNITS_PER_IX)}}),signers:S}}))})),a.register("5P0il",(function(n,o){e(n.exports,"getReferralAccount",(function(){return c}));var r=a("7WDKa"),i=a("13Nf3"),s=a("6rT8n").Buffer;const u=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],c=e=>{const n=`${String.fromCharCode(...u)}||${e}`,o=(0,r.sha256)(s.from(n));return t(i).encode(o)}})),a.register("7WDKa",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sha224=e.exports.sha256=void 0;var n=a("15uI7"),o=a("6y2cy");const r=(e,t,n)=>e&t^e&n^t&n,i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint32Array(64);class c extends n.SHA2{get(){const{A:e,B:t,C:n,D:o,E:r,F:a,G:i,H:s}=this;return[e,t,n,o,r,a,i,s]}set(e,t,n,o,r,a,i,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|o,this.E=0|r,this.F=0|a,this.G=0|i,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)u[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=u[e-15],n=u[e-2],r=(0,o.rotr)(t,7)^(0,o.rotr)(t,18)^t>>>3,a=(0,o.rotr)(n,17)^(0,o.rotr)(n,19)^n>>>10;u[e]=a+u[e-7]+r+u[e-16]|0}let{A:n,B:a,C:s,D:c,E:l,F:d,G:p,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,o.rotr)(l,6)^(0,o.rotr)(l,11)^(0,o.rotr)(l,25))+((y=l)&d^~y&p)+i[e]+u[e]|0,k=((0,o.rotr)(n,2)^(0,o.rotr)(n,13)^(0,o.rotr)(n,22))+r(n,a,s)|0;f=p,p=d,d=l,l=c+t|0,c=s,s=a,a=n,n=t+k|0}var y;n=n+this.A|0,a=a+this.B|0,s=s+this.C|0,c=c+this.D|0,l=l+this.E|0,d=d+this.F|0,p=p+this.G|0,f=f+this.H|0,this.set(n,a,s,c,l,d,p,f)}roundClean(){u.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}}class l extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.exports.sha256=(0,o.wrapConstructor)((()=>new c)),e.exports.sha224=(0,o.wrapConstructor)((()=>new l))})),a.register("15uI7",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SHA2=void 0;var n=a("63trd"),o=a("6y2cy");class r extends o.Hash{update(e){(0,n.exists)(this);const{view:t,buffer:r,blockLen:a}=this,i=(e=(0,o.toBytes)(e)).length;for(let n=0;n<i;){const s=Math.min(a-this.pos,i-n);if(s!==a)r.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===a&&(this.process(t,0),this.pos=0);else{const t=(0,o.createView)(e);for(;a<=i-n;n+=a)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.exists)(this),(0,n.output)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:a,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>a-s&&(this.process(r,0),s=0);for(let e=s;e<a;e++)t[e]=0;!function(e,t,n,o){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,o);const r=BigInt(32),a=BigInt(4294967295),i=Number(n>>r&a),s=Number(n&a),u=o?4:0,c=o?0:4;e.setUint32(t+u,i,o),e.setUint32(t+c,s,o)}(r,a-8,BigInt(8*this.length),i),this.process(r,0);const u=(0,o.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)u.setUint32(4*e,d[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:o,finished:r,destroyed:a,pos:i}=this;return e.length=o,e.pos=i,e.finished=r,e.destroyed=a,o%t&&e.buffer.set(n),e}constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,o.createView)(this.buffer)}}e.exports.SHA2=r})),a.register("63trd",(function(e,t){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function o(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function r(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function a(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function s(e,t){r(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.output=e.exports.exists=e.exports.hash=e.exports.bytes=e.exports.bool=e.exports.number=void 0,e.exports.number=n,e.exports.bool=o,e.exports.bytes=r,e.exports.hash=a,e.exports.exists=i,e.exports.output=s;const u={number:n,bool:o,bytes:r,hash:a,exists:i,output:s};e.exports.default=u})),a.register("6y2cy",(function(e,t){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.randomBytes=e.exports.wrapXOFConstructorWithOpts=e.exports.wrapConstructorWithOpts=e.exports.wrapConstructor=e.exports.checkOpts=e.exports.Hash=e.exports.concatBytes=e.exports.toBytes=e.exports.utf8ToBytes=e.exports.asyncLoop=e.exports.nextTick=e.exports.hexToBytes=e.exports.bytesToHex=e.exports.isLE=e.exports.rotr=e.exports.createView=e.exports.u32=e.exports.u8=void 0;var n=a("gwaji");const o=e=>e instanceof Uint8Array;e.exports.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.exports.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.exports.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(e.exports.rotr=(e,t)=>e<<32-t|e>>>t,e.exports.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.exports.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.exports.bytesToHex=function(e){if(!o(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.exports.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const o=2*t,r=e.slice(o,o+2),a=Number.parseInt(r,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[t]=a}return n};function i(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function s(e){if("string"==typeof e&&(e=i(e)),!o(e))throw new Error("expected Uint8Array, got "+typeof e);return e}e.exports.nextTick=async()=>{},e.exports.asyncLoop=async function(t,n,o){let r=Date.now();for(let a=0;a<t;a++){o(a);const t=Date.now()-r;t>=0&&t<n||(await(0,e.exports.nextTick)(),r+=t)}},e.exports.utf8ToBytes=i,e.exports.toBytes=s,e.exports.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!o(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t};e.exports.Hash=class{clone(){return this._cloneInto()}};const u={}.toString;e.exports.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==u.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.exports.wrapConstructor=function(e){const t=t=>e().update(s(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.exports.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.exports.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.exports.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}})),a.register("gwaji",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.crypto=void 0,e.exports.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0})),a.register("cqMZT",(function(n,o){e(n.exports,"depositStake",(function(){return g}),(function(e){return g=e}));var r=a("3fvLJ"),i=a("5Py8w"),s=a("8Xw9B"),u=a("iC8Bj"),c=a("53ZRU"),l=a("gUNka"),d=a("20p3V"),p=a("6rT8n").Buffer,f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function y(e,t){return f(this,void 0,void 0,(function*(){const n=yield e.getAccountInfo(t);if(!n)throw new Error("Invalid stake pool account");return{pubkey:t,account:{data:d.StakePoolLayout.decode(n.data),executable:n.executable,lamports:n.lamports,owner:n.owner}}}))}function k(e,t){return f(this,void 0,void 0,(function*(){const[n]=yield r.PublicKey.findProgramAddress([t.toBuffer(),p.from("withdraw")],e);return n}))}function g(e,n,o,a,d,g,v){return f(this,void 0,void 0,(function*(){const h=yield y(e,n),S=yield k(c.STAKE_POOL_PROGRAM_ID,n),m=yield function(e,n,o,a){return f(this,void 0,void 0,(function*(){const[i]=yield r.PublicKey.findProgramAddress([n.toBuffer(),o.toBuffer(),a?new(t(u))(a).toArrayLike(p,"le",4):p.alloc(0)],e);return i}))}(c.STAKE_POOL_PROGRAM_ID,a,n),b=[],w=h.account.data.poolMint;if(!g){const e=(0,s.getAssociatedTokenAddressSync)(w,o);b.push((0,i.createAssociatedTokenAccountIdempotentInstruction)(o,e,o,w)),g=e}return b.push(...r.StakeProgram.authorize({stakePubkey:d,authorizedPubkey:o,newAuthorizedPubkey:h.account.data.stakeDepositAuthority,stakeAuthorizationType:r.StakeAuthorizationLayout.Staker}).instructions),b.push(...r.StakeProgram.authorize({stakePubkey:d,authorizedPubkey:o,newAuthorizedPubkey:h.account.data.stakeDepositAuthority,stakeAuthorizationType:r.StakeAuthorizationLayout.Withdrawer}).instructions),b.push(l.StakePoolInstruction.depositStake({stakePool:n,validatorList:h.account.data.validatorList,depositAuthority:h.account.data.stakeDepositAuthority,reserveStake:h.account.data.reserveStake,managerFeeAccount:h.account.data.managerFeeAccount,referralPoolAccount:g,destinationPoolAccount:g,withdrawAuthority:S,depositStake:d,validatorStake:m,poolMint:w,referralAccount:v})),{instructions:b,signers:[]}}))}})),a.register("5Py8w",(function(t,n){e(t.exports,"createAssociatedTokenAccountInstruction",(function(){return s})),e(t.exports,"createAssociatedTokenAccountIdempotentInstruction",(function(){return u}));var o=a("csgS8"),r=a("kd2w2"),i=a("6rT8n").Buffer;function s(e,t,n,o,a=r.TOKEN_PROGRAM_ID,s=r.ASSOCIATED_TOKEN_PROGRAM_ID){return c(e,t,n,o,i.alloc(0),a,s)}function u(e,t,n,o,a=r.TOKEN_PROGRAM_ID,s=r.ASSOCIATED_TOKEN_PROGRAM_ID){return c(e,t,n,o,i.from([1]),a,s)}function c(e,t,n,a,i,s=r.TOKEN_PROGRAM_ID,u=r.ASSOCIATED_TOKEN_PROGRAM_ID){const c=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new(0,o.TransactionInstruction)({keys:c,programId:u,data:i})}})),a.register("53ZRU",(function(t,n){e(t.exports,"STAKE_POOL_PROGRAM_ID",(function(){return o}));const o=new(0,a("3fvLJ").PublicKey)("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy")})),a.register("gUNka",(function(t,n){e(t.exports,"StakePoolInstruction",(function(){return l}));var o=a("3fvLJ"),r=a("kd2w2"),i=a("53ZRU"),s=a("6rT8n").Buffer;const u=Object.freeze({DepositStake:{index:9,layout:o.BufferLayout.struct([o.BufferLayout.u8("instruction")])},DepositSol:{index:14,layout:o.BufferLayout.struct([o.BufferLayout.u8("instruction"),o.BufferLayout.ns64("lamports")])}});function c(e,t){const n=e.layout.span,o=s.alloc(n),r=Object.assign({instruction:e.index},t);return e.layout.encode(r,o),o}class l{static depositStake(e){const{stakePool:t,validatorList:n,depositAuthority:a,withdrawAuthority:s,depositStake:l,validatorStake:d,reserveStake:p,destinationPoolAccount:f,managerFeeAccount:y,referralPoolAccount:k,poolMint:g,referralAccount:v}=e,h=c(u.DepositStake),S=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:o.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:o.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:r.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:o.StakeProgram.programId,isSigner:!1,isWritable:!1}];return v&&S.push({pubkey:v,isSigner:!1,isWritable:!1}),new(0,o.TransactionInstruction)({programId:i.STAKE_POOL_PROGRAM_ID,keys:S,data:h})}static depositSol(e){const{stakePool:t,withdrawAuthority:n,depositAuthority:a,reserveStake:s,fundingAccount:l,destinationPoolAccount:d,managerFeeAccount:p,referralPoolAccount:f,poolMint:y,lamports:k}=e,g=c(u.DepositSol,{lamports:k}),v=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!0,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:r.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}];return a&&v.push({pubkey:a,isSigner:!0,isWritable:!1}),new(0,o.TransactionInstruction)({programId:i.STAKE_POOL_PROGRAM_ID,keys:v,data:g})}}})),a.register("20p3V",(function(t,n){e(t.exports,"StakePoolLayout",(function(){return i}));var o=a("fSwrH");const r=[(0,o.u64)("denominator"),(0,o.u64)("numerator")],i=(0,o.struct)([(0,o.u8)("accountType"),(0,o.publicKey)("manager"),(0,o.publicKey)("staker"),(0,o.publicKey)("stakeDepositAuthority"),(0,o.u8)("stakeWithdrawBumpSeed"),(0,o.publicKey)("validatorList"),(0,o.publicKey)("reserveStake"),(0,o.publicKey)("poolMint"),(0,o.publicKey)("managerFeeAccount"),(0,o.publicKey)("tokenProgramId"),(0,o.u64)("totalLamports"),(0,o.u64)("poolTokenSupply"),(0,o.u64)("lastUpdateEpoch"),(0,o.struct)([(0,o.u64)("unixTimestamp"),(0,o.u64)("epoch"),(0,o.publicKey)("custodian")],"lockup"),(0,o.struct)(r,"epochFee"),(0,o.option)((0,o.struct)(r),"nextEpochFee"),(0,o.option)((0,o.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,o.option)((0,o.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,o.struct)(r,"stakeDepositFee"),(0,o.struct)(r,"stakeWithdrawalFee"),(0,o.option)((0,o.struct)(r),"nextStakeWithdrawalFee"),(0,o.u8)("stakeReferralFee"),(0,o.option)((0,o.publicKey)(),"solDepositAuthority"),(0,o.struct)(r,"solDepositFee"),(0,o.u8)("solReferralFee"),(0,o.option)((0,o.publicKey)(),"solWithdrawAuthority"),(0,o.struct)(r,"solWithdrawalFee"),(0,o.option)((0,o.struct)(r),"nextSolWithdrawalFee"),(0,o.u64)("lastEpochPoolTokenSupply"),(0,o.u64)("lastEpochTotalLamports")])})),a.register("fSwrH",(function(e,t){var n=a("6rT8n").Buffer,o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.map=e.exports.array=e.exports.rustEnum=e.exports.str=e.exports.vecU8=e.exports.tagged=e.exports.vec=e.exports.bool=e.exports.option=e.exports.publicKey=e.exports.i256=e.exports.u256=e.exports.i128=e.exports.u128=e.exports.i64=e.exports.u64=e.exports.struct=e.exports.f64=e.exports.f32=e.exports.i32=e.exports.u32=e.exports.i16=e.exports.u16=e.exports.i8=e.exports.u8=void 0;var r=a("hpPIR"),i=a("csgS8");const s=o(a("iC8Bj"));r=a("hpPIR");Object.defineProperty(e.exports,"u8",{enumerable:!0,get:function(){return r.u8}}),Object.defineProperty(e.exports,"i8",{enumerable:!0,get:function(){return r.s8}}),Object.defineProperty(e.exports,"u16",{enumerable:!0,get:function(){return r.u16}}),Object.defineProperty(e.exports,"i16",{enumerable:!0,get:function(){return r.s16}}),Object.defineProperty(e.exports,"u32",{enumerable:!0,get:function(){return r.u32}}),Object.defineProperty(e.exports,"i32",{enumerable:!0,get:function(){return r.s32}}),Object.defineProperty(e.exports,"f32",{enumerable:!0,get:function(){return r.f32}}),Object.defineProperty(e.exports,"f64",{enumerable:!0,get:function(){return r.f64}}),Object.defineProperty(e.exports,"struct",{enumerable:!0,get:function(){return r.struct}});class u extends r.Layout{decode(e,t=0){const n=new s.default(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}encode(e,t,o=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(n,"le",this.span),t,o)}constructor(e,t,n){super(e,n),this.blob=(0,r.blob)(e),this.signed=t}}function c(e){return new u(8,!1,e)}e.exports.u64=c,e.exports.i64=function(e){return new u(8,!0,e)},e.exports.u128=function(e){return new u(16,!1,e)},e.exports.i128=function(e){return new u(16,!0,e)},e.exports.u256=function(e){return new u(32,!1,e)},e.exports.i256=function(e){return new u(32,!0,e)};class l extends r.Layout{decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}constructor(e,t,n,o){super(e.span,o),this.layout=e,this.decoder=t,this.encoder=n}}e.exports.publicKey=function(e){return new l((0,r.blob)(32),(e=>new i.PublicKey(e)),(e=>e.toBuffer()),e)};class d extends r.Layout{encode(e,t,n=0){return null==e?this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+1)+1)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return 1;if(1===n)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,r.u8)()}}function p(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function f(e){return e?1:0}function y(e){const t=(0,r.u32)("length"),n=(0,r.struct)([t,(0,r.blob)((0,r.offset)(t,-t.span),"data")]);return new l(n,(({data:e})=>e),(e=>({data:e})),e)}e.exports.option=function(e,t){return new d(e,t)},e.exports.bool=function(e){return new l((0,r.u8)(),p,f,e)},e.exports.vec=function(e,t){const n=(0,r.u32)("length"),o=(0,r.struct)([n,(0,r.seq)(e,(0,r.offset)(n,-n.span),"values")]);return new l(o,(({values:e})=>e),(e=>({values:e})),t)},e.exports.tagged=function(e,t,n){const o=(0,r.struct)([c("tag"),t.replicate("data")]);return new l(o,(function({tag:t,data:n}){if(!t.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+t.toString("hex"));return n}),(t=>({tag:e,data:t})),n)},e.exports.vecU8=y,e.exports.str=function(e){return new l(y(),(e=>e.toString("utf-8")),(e=>n.from(e,"utf-8")),e)},e.exports.rustEnum=function(e,t,n){const o=(0,r.union)(null!=n?n:(0,r.u8)(),t);return e.forEach(((e,t)=>o.addVariant(t,e,e.property))),o},e.exports.array=function(e,t,n){const o=(0,r.struct)([(0,r.seq)(e,t,"values")]);return new l(o,(({values:e})=>e),(e=>({values:e})),n)};class k extends r.Layout{decode(e,t){t=t||0;return[this.keyLayout.decode(e,t),this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t))]}encode(e,t,n){n=n||0;const o=this.keyLayout.encode(e[0],t,n);return o+this.valueLayout.encode(e[1],t,n+o)}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}constructor(e,t,n){super(e.span+t.span,n),this.keyLayout=e,this.valueLayout=t}}e.exports.map=function(e,t,n){const o=(0,r.u32)("length"),a=(0,r.struct)([o,(0,r.seq)(new k(e,t),(0,r.offset)(o,-o.span),"values")]);return new l(a,(({values:e})=>new Map(e)),(e=>({values:Array.from(e.entries())})),n)}})),a.register("eJfec",(function(t,n){e(t.exports,"useLiquidStakingTransactionFees",(function(){return c}));var o=a("belzv"),r=a("lMzyG"),i=a("4y59b"),s=a("lDSNw");const u=(0,i.toMilliseconds)({seconds:10}),c=({chainAddress:e,fungibleHooks:t,transactionData:n,transactionHooks:r})=>{var a,i;const{data:c,isLoading:f,isFetched:y,isSuccess:k}=r.useGasEstimation({networkID:null!==(a=null==n?void 0:n.networkID)&&void 0!==a?a:o.Chains.solana.mainnetID,multichainTransaction:d(n),queryOptions:{refetchInterval:u}}),{hasSufficientFunds:g,isLoading:v,nativeTokenSymbol:h}=t.useHasSufficientFunds(null!==(i=null==n?void 0:n.networkID)&&void 0!==i?i:o.Chains.solana.mainnetID,null==e?void 0:e.addressType,c,void 0),S=p({hasSufficientFunds:g,hasGasEstimationFailed:y&&!k,nativeTokenSymbol:h}),m=l(c),b=f||v;return(0,s.useMemo)((()=>({isLoading:b,hasSufficientFunds:g,transactionFees:m,networkFeeErrorMsg:S,nativeTokenSymbol:h})),[b,g,m,S,h])},l=e=>e&&o.Chains.isSolanaNetworkID(e.networkID)?new(0,i.BigNumber)(e.value):new(0,i.BigNumber)(0),d=e=>{if(e&&o.Chains.isSolanaNetworkID(e.networkID)){const{networkID:t,transaction:n}=e;return{networkID:t,transaction:[n]}}},p=({hasSufficientFunds:e,hasGasEstimationFailed:t,nativeTokenSymbol:n})=>t?r.i18next.t("transactionGasEstimationError"):"insufficient"===e?r.i18next.t("transactionNotEnoughNative",{nativeTokenSymbol:n}):void 0})),a.register("gnXv2",(function(t,n){e(t.exports,"useConvertStakeAccountStatusPageProps",(function(){return v}),(function(e){return v=e}));var o=a("6Tvfa"),r=a("lMzyG"),i=a("gd9Oy"),s=a("4raQz"),u=a("lDSNw"),c=a("24sH7"),l=a("eK4Ly");a("1rRmV");var d=a("3s5hF");a("jqEmo");var p=a("kW76A"),f=a("7cbu2"),y=a("a9TgV"),k=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const g="https://www.jito.network/defi/";const v=({accountSigner:e,accountHooks:t,storage:n,transactionHooks:a,fungibleHooks:v,queryClient:h,dismissConvertFlow:S,goToConvertAccountList:m})=>{var b,w,A,x,P,T;const C=(e=>(0,u.useCallback)((()=>(0,p.invalidateAllStakeAccountData)(e)()),[e]))(h),[I,L]=(0,u.useState)("loading"),[E,D]=(0,u.useState)(),[N,O]=(0,u.useState)(),{trackConvertSubmitted:M,trackConvertSuccess:F,trackConvertFailed:R,trackConvertMoreClicked:_}=(0,y.useLiquidStakingAnalytics)(),K=(0,d.useLiquidStakingStore)((e=>e.fungibleToStake)),q=(0,d.useLiquidStakingStore)((e=>e.provider)),U=(0,d.useLiquidStakingStore)((e=>e.convert)),z=(0,d.useLiquidStakingStore)((e=>e.eligibleAccountsCount)),V=(0,d.useLiquidStakingStore)((e=>e.transactionData)),H=(0,d.useLiquidStakingStore)((e=>e.setConvertStakeAccount)),B=(0,d.useLiquidStakingStore)((e=>e.setTransactionData)),W=null!==(b=null==K?void 0:K.data.symbol)&&void 0!==b?b:"",j=null!==(w=null==q?void 0:q.stakePoolTokenMetadata.metadata.symbol)&&void 0!==w?w:"",G=null!==(A=null==q?void 0:q.stakePoolTokenMetadata.metadata.address)&&void 0!==A?A:"",{data:Q,isLoading:Y}=t.useSelectedMultiChainAccount(),J=null!==(x=null==Q?void 0:Q.identifier)&&void 0!==x?x:"",Z=(null==Q?void 0:Q.type)===o.AccountType.Ledger,X=(0,u.useMemo)((()=>{var e;return(null!==(e=null==Q?void 0:Q.addresses)&&void 0!==e?e:[]).find((e=>e.networkID===(null==K?void 0:K.data.chain.id)))}),[null==K?void 0:K.data.chain.id,null==Q?void 0:Q.addresses]),$=null!==(P=null==X?void 0:X.address)&&void 0!==P?P:"",ee=null!==(T=null==X?void 0:X.addressType)&&void 0!==T?T:i.AddressType.Solana,{fungible:te,isLoadingTokens:ne}=v.useGetFungibleBalance({key:G}),{connection:oe}=a.useSelectedSolanaConnection(),{mutateAsync:re}=(0,l.useProcessTransactionData)({accountSigner:e,connection:oe,storage:n}),ae=(0,u.useMemo)((()=>({topLeft:{label:r.i18next.t("convertStakePendingTitle",{symbol:j})}})),[j]),ie=!Y||!ne,se=(0,u.useCallback)((()=>k(void 0,void 0,void 0,(function*(){try{if(!V)throw new(0,c.StakingError)(c.StakingErrorCodes.MissingTransactionData);const e=yield re({accountIdentifier:J,ownerAddress:$,pendingActivityRow:ae,activityType:s.PendingTransactionType.ConvertStake,transactionData:V});M(e.id),D(e)}catch(e){R(U);const t=(0,f.parseStakingError)(e);O(t)}}))),[R,M,J,U,$,ae,re,V]),ue=(0,u.useCallback)((()=>{F(U,q),H(void 0),B(void 0),C()}),[F,H,B,C,q,U]),{isSuccess:ce,isError:le,error:de}=a.useWaitForTransactionConfirmation(ue,E);(0,u.useEffect)((()=>{ce?L("confirmed"):le&&(L("error"),O(de))}),[ce,le,de,E]);const pe=(({txReceipt:e,isTxError:t,poolTokenFungible:n,invalidateQueries:o,dismissConvertFlow:r})=>{const a=(0,d.useLiquidStakingStore)((e=>e.resetStaking)),i=(0,d.useLiquidStakingStore)((e=>e.setNavigateTo)),s=(0,d.useLiquidStakingStore)((e=>e.setSkipDismissRouting)),c=(0,d.useLiquidStakingStore)((e=>e.skipDismissRouting));return(0,u.useCallback)((()=>(a(),!e||t?r():(o(),c?(s(void 0),r()):(i(n?{screen:"FungibleDetail",fungible:n}:{screen:"Activity"}),void r())))),[e,t,n,o,r,i,a,c,s])})({txReceipt:E,isTxError:le,poolTokenFungible:te,invalidateQueries:C,dismissConvertFlow:S}),fe=(0,u.useCallback)((()=>{_(),m()}),[_,m]);return{addressType:ee,isLedger:Z,isReadyToExecute:ie,statusPageProps:(0,u.useMemo)((()=>function({stakedTokenSymbol:e,poolTokenSymbol:t,txHash:n,txError:o,confirmationStatus:a,eligibleAccountsCount:i,onDismiss:s,onConvertMore:u}){return o?{type:"error",title:r.i18next.t("convertStakeStatusErrorTitle"),message:r.i18next.t("convertStakeStatusErrorMessage",{poolTokenSymbol:t}),txHash:n,txHashTitle:r.i18next.t("commandViewTransaction"),button:{title:r.i18next.t("commandClose"),onPress:s}}:"confirmed"===a?{type:"success",title:r.i18next.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:t}),learnMoreLink:g,txHash:n,txHashTitle:r.i18next.t("commandViewTransaction"),continueButton:i>1?{title:r.i18next.t("convertStakeStatusConvertMore"),onPress:u}:void 0,closeButton:{title:r.i18next.t("commandClose"),onPress:s}}:{type:"loading",title:r.i18next.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:r.i18next.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:e,poolTokenSymbol:t}),txHash:n,txHashTitle:r.i18next.t("commandViewTransaction"),button:{title:r.i18next.t("commandClose"),onPress:s}}}({stakedTokenSymbol:W,poolTokenSymbol:j,txHash:null==E?void 0:E.id,txError:N,confirmationStatus:I,eligibleAccountsCount:z,onDismiss:pe,onConvertMore:fe})),[W,j,null==E?void 0:E.id,N,I,z,pe,fe]),txError:N,executeConvertStake:se}}})),a.register("eK4Ly",(function(t,n){e(t.exports,"useProcessTransactionData",(function(){return c}),(function(e){return c=e}));var o=a("belzv"),r=a("3fvLJ"),i=a("4raQz"),s=a("fG04A"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const c=({accountSigner:e,connection:t,storage:n})=>(0,s.useMutation)({mutationFn:a=>u(void 0,[a],void 0,(function*({accountIdentifier:a,ownerAddress:s,pendingActivityRow:u,activityType:c,transactionData:{networkID:l,transaction:d,signers:p}}){if(o.Chains.isSolanaNetworkID(l)){const o=(yield t.getLatestBlockhash("confirmed")).blockhash;(0,r.setRecentBlockhash)(d,o);const f={ownerAddress:s,networkID:l,data:{signature:""},type:c,display:{summary:u}};return{id:yield(0,i.signAndSendSolanaTransactionAsync)({accountIdentifier:a,feePayer:new(0,r.PublicKey)(s),connection:t,accountSigner:e,transaction:d,pendingTransactionInput:f,storage:n,opts:{additionalSignerAccounts:p}}),networkID:l}}throw new Error(`Unsupported network for liquid staking: ${l}`)}))})})),a.register("7cbu2",(function(t,n){e(t.exports,"parseStakingError",(function(){return r}));var o=a("24sH7");function r(e){return e instanceof o.StakingError?e:new(0,o.StakingError)(o.StakingErrorCodes.UnknownError)}})),a.register("jkU7b",(function(t,n){e(t.exports,"useConvertStakeBannerProps",(function(){return l}));var o=a("lMzyG"),r=a("gd9Oy"),i=a("lDSNw"),s=a("i6Kga"),u=a("29xqG"),c=a("a9TgV");const l=({fungible:e,accountHooks:t,transactionHooks:n,goToConvertStake:a,getApiEnvironment:l})=>{var d;const{connection:p}=n.useSelectedSolanaConnection(),{data:f}=t.useSelectedChainAddress(r.AddressType.Solana),{data:y=[],isLoading:k}=(0,s.useStakeAccounts)(p,null!==(d=null==f?void 0:f.address)&&void 0!==d?d:""),{trackConvertBannerClicked:g,trackConvertBannerSeen:v}=(0,c.useLiquidStakingAnalytics)();(0,i.useEffect)((()=>{v()}),[]);const{isLoading:h,isSupported:S,initConvertStake:m}=(0,u.useLiquidStaking)(l,e),b=!(k||h)&&S&&y.length>0,w=(0,i.useCallback)((()=>{g(),m(),a()}),[g,m,a]);return{title:o.i18next.t("convertStakeBannerTitle"),canConvertStake:b,onPress:w}}})),a.register("k2NbH",(function(t,n){e(t.exports,"createStakeAnalytics",(function(){return i}));var o=a("9ktGj");const r={type:"fungible",isNativeOfType:"sol",chain:a("belzv").Chain.Solana,name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},i=e=>new s(e,"stake");class s extends o.SequenceAnalytics{constructor(){super(...arguments),this.createStakeAccountAndDelegateStake=e=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:Object.assign(Object.assign({},e),r)})},this.deactivateStake=()=>{this.analytics.capture("deactivateStake",{data:Object.assign({},r)})}}}class u extends o.SequenceAnalytics{}})),a.register("cBz6V",(function(t,n){e(t.exports,"useGetMaxTransferrableSol",(function(){return u}));var o=a("3fvLJ"),r=a("4raQz"),i=a("4y59b"),s=a("brdGs");const u=({balance:e,cluster:t,rentExemptionMinimum:n})=>{const{data:a}=(0,r.useNetworkFeeSolana)(t),u=(0,s.getMaxTransferrableSol)({numSignatures:11,lamportsPerSignature:a,lamportBalance:(0,i.BigNumber)(e),rentExemptionMinimum:(0,o.solanaToLamports)(n)});return parseFloat((0,o.lamportsToSolana)(u).toFixed(9))}})),a.register("brdGs",(function(n,o){e(n.exports,"getMaxTransferrableSol",(function(){return i}));var r=a("3yHS8");const i=({numSignatures:e,lamportsPerSignature:n,lamportBalance:o,rentExemptionMinimum:a})=>{const i=t(r)(n).multipliedBy(e),s=o.minus(i);return t(r).max(s.minus(a),0)}})),a.register("hvGDb",(function(t,n){e(t.exports,"stakingShouldDehydrateQueryPredicate",(function(){return r}));const o=[a("bZPmb").LIQUID_STAKING_QUERY_KEYS_PREFIX.supportedTokens],r=e=>{const t=String(e.queryKey[1]);return o.includes(t)}}));
//# sourceMappingURL=staking.037c2788.js.map
define=__define;})(window.define);