(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},a=n.parcelRequire1d24;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},n.parcelRequire1d24=a),a.register("egHtJ",(function(t,n){e(t.exports,"PHANTOM_STAKE_NODE",(function(){return o})),e(t.exports,"SOL_STAKING_DOCS",(function(){return a("f5UU6").SOL_STAKING_DOCS})),e(t.exports,"SOL_STAKING_REWARDS_DOCS",(function(){return a("f5UU6").SOL_STAKING_REWARDS_DOCS})),e(t.exports,"CONVERT_TO_JITOSOL_LEARN_MORE_LINK",(function(){return a("f5UU6").CONVERT_TO_JITOSOL_LEARN_MORE_LINK})),e(t.exports,"UNSTAKE_JITOSOL_LINK",(function(){return a("f5UU6").UNSTAKE_JITOSOL_LINK})),e(t.exports,"createStakingHooks",(function(){return a("j4jBF").createStakingHooks})),e(t.exports,"StakeAccountType",(function(){return a("jjhma").StakeAccountType})),e(t.exports,"calculateTotalValidatorAPY",(function(){return a("8lo7S").calculateTotalValidatorAPY})),e(t.exports,"recommendedValidatorSorter",(function(){return a("kAm35").recommendedValidatorSorter})),e(t.exports,"createStakeAnalytics",(function(){return a("8B6ZJ").createStakeAnalytics})),e(t.exports,"useGetMaxTransferrableSol",(function(){return a("czeP8").useGetMaxTransferrableSol})),e(t.exports,"useLiquidStakingStore",(function(){return a("5HQUf").useLiquidStakingStore})),e(t.exports,"stakingShouldDehydrateQueryPredicate",(function(){return a("fMZSj").stakingShouldDehydrateQueryPredicate}));a("f5UU6");a("hvyP7");a("j4jBF"),a("jjhma");a("9OqWg");a("8lo7S"),a("kAm35"),a("8B6ZJ"),a("liNiM"),a("czeP8"),a("d5USZ");a("bX8dN");a("5HQUf"),a("fMZSj");const o={identityPublicKey:"7GkMBmtrTZz8QbjSe1sXvAUtz7Pp42SQxfT5ymmJD4We",voteAccountPublicKey:"J2nUHEAgZFRyuJbFjdqPrAa9gyWDuc7hErtDQHPhsYRp"}})),a.register("f5UU6",(function(t,n){e(t.exports,"CONFIG_PROGRAM_ID",(function(){return u})),e(t.exports,"SOL_STAKING_DOCS",(function(){return c})),e(t.exports,"SOL_STAKING_REWARDS_DOCS",(function(){return d})),e(t.exports,"NETWORK_TO_NATIVE_FUNGIBLE",(function(){return p})),e(t.exports,"CONVERT_TO_JITOSOL_LEARN_MORE_LINK",(function(){return f})),e(t.exports,"UNSTAKE_JITOSOL_LINK",(function(){return k}));var o=a("iOvk1"),r=a("5slFC"),i=a("hMVEP"),s=a("RVqnc");const u=new(0,i.PublicKey)("Config1111111111111111111111111111111111111"),c="https://docs.solana.com/staking",d="https://docs.solana.com/implemented-proposals/staking-rewards",l={type:r.FungibleTokenType.SolanaNative,data:{amount:"0",balance:new(0,s.BigNumber)(0),chain:{id:o.Chains.solana.mainnetID,imageUrl:o.Chains.solana.iconUrl,name:o.Chains.solana.name,symbol:o.Chains.solana.tokenSymbol},coingeckoId:"solana",decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:r.SpamStatus.NotVerified}},p=new Map([[o.NetworkIDs.Solana.Mainnet,l]]),f="https://www.jito.network/blog/lsts-vs-native-assets/",k="https://www.jito.network/staking/?mode=unstake"})),a.register("hvyP7",(function(t,n){e(t.exports,"createStakingHooks",(function(){return a("j4jBF").createStakingHooks}));a("j4jBF")})),a.register("j4jBF",(function(t,n){e(t.exports,"createStakingHooks",(function(){return C}));var o=a("7gANb"),r=a("5ZOeC"),i=a("lEqf0"),s=a("6fWI5"),u=a("6Bfdh"),c=a("48Z1Q"),d=a("39pK6"),l=a("gqfgW"),p=a("3cJgq"),f=a("d5USZ"),k=a("40bAw"),g=a("8BkVZ"),y=a("kETlb"),h=a("FEhzp"),v=a("cJRQS"),S=a("efxv4"),m=a("bakCR"),b=a("1C4N1"),A=a("fcYa8"),w=a("120WT"),P=a("8YG4F"),x=a("9pwbm"),T=a("kFx26");function C({accountSigner:e,accountHooks:t,storage:n,fungibleHooks:a,priceHooks:C,transactionHooks:E,queryClient:I,getApiEnvironment:L,stakeAnalytics:N}){const D=new(0,o.PriorityFeeService);return{useKeybaseUserAvatar:e=>(0,u.useKeybaseUserAvatar)(e),useRecommendedValidators:()=>(0,c.useRecommendedValidators)(L),useSignatureStatus:(e,t,n)=>(0,d.useSignatureStatus)(I,e,t,n),useStakeAccounts:p.useStakeAccounts,useStakeAccountMinBalance:l.useStakeAccountMinBalance,useStakeActivationData:f.useStakeActivationData,useStakeApy:()=>(0,k.useStakeApy)(L),useStakeRewardsHistory:(e,t)=>(0,g.useStakeRewardsHistory)(L,e,t),useValidators:h.useValidators,useValidatorInfo:y.useValidatorInfo,useVoteAccounts:v.useVoteAccounts,useConvertStakeAccountInfoPageProps:e=>(0,m.useConvertStakeAccountInfoPageProps)(e,t,E,L),useConvertStakeAccountReviewPageProps:e=>(0,A.useConvertStakeAccountReviewPageProps)({accountHooks:t,fungibleHooks:a,transactionHooks:E,priceHooks:C,priorityFeeService:D,navigateToStatusPage:e}),useConvertStakeAccountListPageProps:e=>(0,b.useConvertStakeAccountListPageProps)({accountHooks:t,transactionHooks:E,navigateToReviewPage:e}),useConvertStakeAccountStatusPageProps:o=>(0,w.useConvertStakeAccountStatusPageProps)(Object.assign(Object.assign({},o),{accountSigner:e,accountHooks:t,fungibleHooks:a,storage:n,transactionHooks:E,queryClient:I})),useConvertStakeBannerProps:e=>(0,P.useConvertStakeBannerProps)(Object.assign(Object.assign({},e),{accountHooks:t,transactionHooks:E,getApiEnvironment:L})),useNativeLiquidStaking:e=>(0,T.useNativeLiquidStaking)(L,e),useLiquidStakingAnalytics:()=>(0,x.useLiquidStakingAnalytics)(),useDelegateStake:e=>(0,s.useDelegateStake)(E,e,I,D,N),useCreateStakeAccountAndDelegateStake:e=>(0,r.useCreateStakeAccountAndDelegateStake)(E,e,I,D,N),useDeactivateStake:e=>(0,i.useDeactivateStake)(E,e,I,D,N),useWithdrawStake:e=>(0,S.useWithdrawStake)(E,e,I,D,N)}}})),a.register("5ZOeC",(function(t,n){e(t.exports,"useCreateStakeAccountAndDelegateStake",(function(){return y}),(function(e){return y=e}));var o=a("iOvk1"),r=a("43063"),i=a("7mQ3Y"),s=a("hMVEP"),u=a("csW2r"),c=a("7gANb"),d=a("9W7fs"),l=a("3vaB1");a("9OqWg");var p=a("hIkt0"),f=a("6fWI5"),k=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function g({lamports:e,votePubkey:t,authorizedPubkey:n}){const[o,r]=function({ownerPublicKey:e,lamports:t,transaction:n=new(0,s.Transaction)}){const o=s.Keypair.generate();return n.add(s.StakeProgram.createAccount({fromPubkey:e,stakePubkey:o.publicKey,authorized:new(0,s.Authorized)(e,e),lamports:t})),[n,o]}({ownerPublicKey:n,lamports:e});return o.add((0,f.delegateStake)({stakePubkey:r.publicKey,authorizedPubkey:n,votePubkey:t})),[o,r]}const y=(e,t,n,a,f)=>{const{t:y}=(0,r.useTranslation)(),{mutateAsync:h}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>k(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,lamports:r,votePubkey:u,authorizedPubkey:d,usdPerSol:p}){if(!n)throw l.MissingSenderAddressError;const{networkID:k,address:v}=n,[S,m]=g({accountIdentifier:e,senderAddress:n,lamports:r,votePubkey:u,authorizedPubkey:d}),b=yield a.addPriorityFee(S,{connection:t}),A={ownerAddress:null!=v?v:"",networkID:k,data:{signature:""},type:c.PendingTransactionType.CreateAccountAndDelegateStake,display:{summary:{topLeft:{label:y("transactionsPendingCreatingAndDelegatingStake")}}}};f.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(k),type:"delegate"})));const w=yield h({accountIdentifier:e,feePayer:new(0,s.PublicKey)(v),transaction:b,pendingTransactionInput:A,opts:{additionalSignerAccounts:[m]}});f.then((e=>e.submittedTransaction(w,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(k),method:"signAndSendTransaction"})));const P=(0,s.lamportsToSolana)(r),x=p?P.times(p):void 0;return f.then((e=>e.createStakeAccountAndDelegateStake({sol:P.toNumber(),usd:null==x?void 0:x.toNumber(),voteAccountPubkey:u}))),{networkID:k,id:null!=w?w:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{f.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{f.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("3vaB1",(function(t,n){e(t.exports,"MissingSenderAddressError",(function(){return o})),e(t.exports,"MissingConfirmationSignatureError",(function(){return r})),e(t.exports,"MissingPublicKeyError",(function(){return a})),e(t.exports,"StakingErrorCodes",(function(){return i})),e(t.exports,"StakingError",(function(){return u}));const o=new Error("Missing sender address for staking fungibles."),r=(new Error("Missing signature from staking fungibles."),new Error("Missing signature from waiting for staking transaction confirmation.")),a=new Error("PublicKey is required");var i,s;(s=i||(i={})).MissingTransactionData="MissingTransactionData",s.UnknownError="UnknownError",s.FailedToConfirmTransaction="FailedToConfirmTransaction";class u extends Error{constructor(e){super(e)}}})),a.register("9OqWg",(function(t,n){e(t.exports,"calculateTotalValidatorAPY",(function(){return a("8lo7S").calculateTotalValidatorAPY})),e(t.exports,"invalidateAllStakeAccountData",(function(){return a("hIkt0").invalidateAllStakeAccountData})),e(t.exports,"recommendedValidatorSorter",(function(){return a("kAm35").recommendedValidatorSorter}));a("8lo7S"),a("hIkt0"),a("kAm35")})),a.register("8lo7S",(function(n,o){e(n.exports,"calculateTotalValidatorAPY",(function(){return i}));var r=a("kAKNF");function i(e,n){const o=new(t(r))(e/100),a=new(t(r))(n/100);return o.minus(o.times(a)).times(100).decimalPlaces(2).toNumber()}})),a.register("hIkt0",(function(t,n){e(t.exports,"invalidateAllStakeAccountData",(function(){return r}));var o=a("7dNLn");const r=e=>()=>{e.invalidateQueries({predicate:e=>{const t=t=>t.every(((t,n)=>e.queryKey[n]===t));return t(o.STAKE_ACCOUNTS_SCOPE)||t(o.STAKE_ACTIVATION_DATA_SCOPE)||t(o.CONVERT_STAKE_LIST_SCOPE)||t(o.CONVERT_STAKE_TRANSCTION_SCOPE)}})}})),a.register("7dNLn",(function(t,n){e(t.exports,"LIQUID_STAKING_QUERY_KEYS_PREFIX",(function(){return r})),e(t.exports,"STAKE_ACCOUNTS_SCOPE",(function(){return i})),e(t.exports,"STAKE_ACTIVATION_DATA_SCOPE",(function(){return s})),e(t.exports,"CONVERT_STAKE_LIST_SCOPE",(function(){return u})),e(t.exports,"CONVERT_STAKE_TRANSCTION_SCOPE",(function(){return c})),e(t.exports,"stakingQueryKeys",(function(){return d}));const o="staking";var r,a;(a=r||(r={})).convertStakeList="convertStakeAccountList",a.supportedTokens="liquidStakingSupportedTokens",a.convertStakeTransaction="convertStakeTransaction";const i=[o,"stakeAccounts"],s=[o,"stakeActivationData"],u=[o,r.convertStakeList],c=[o,r.convertStakeTransaction],d={keybaseUserAvatar:e=>[o,"keybaseUserAvatar",e],signatureStatus:e=>[o,"signatureStatus",e],stakeAccounts:(e,t)=>[...i,e,t],stakeAccountMinBalance:()=>[o,"stakeAccountMinBalance"],stakeActivationData:e=>[...s,e],stakeRewardsHistory:e=>[o,"stakeRewardsHistory",e],stakeApy:()=>[o,"stakeApy"],recommendedValidators:()=>[o,"recommendedValidators"],validatorInfo:()=>[o,"validatorInfo"],voteAccounts:e=>[o,"voteAccounts",e],convertStakeAccountList:(e,t)=>[...u,e,t],liquidStakingSupportedTokens:e=>[o,r.supportedTokens,e],getConvertStakeTransaction:e=>[...c,e]}})),a.register("kAm35",(function(t,n){e(t.exports,"recommendedValidatorSorter",(function(){return o}));const o=e=>(t,n)=>{const o=e.indexOf(t.voteAccountPubkey),r=e.indexOf(n.voteAccountPubkey);return(o>-1?o:1/0)-(r>-1?r:1/0)}})),a.register("6fWI5",(function(t,n){e(t.exports,"delegateStake",(function(){return k}),(function(e){return k=e})),e(t.exports,"useDelegateStake",(function(){return g}),(function(e){return g=e}));var o=a("iOvk1"),r=a("43063"),i=a("7mQ3Y"),s=a("hMVEP"),u=a("csW2r"),c=a("7gANb"),d=a("9W7fs"),l=a("3vaB1");a("9OqWg");var p=a("hIkt0"),f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function k({stakePubkey:e,authorizedPubkey:t,votePubkey:n}){return s.StakeProgram.delegate({stakePubkey:e,authorizedPubkey:t,votePubkey:n})}const g=(e,t,n,a,g)=>{const{t:y}=(0,r.useTranslation)(),{mutateAsync:h}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>f(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,authorizedPubkey:u,votePubkey:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:p,address:f}=n,v=k({stakePubkey:r,authorizedPubkey:u,votePubkey:d}),S=yield a.addPriorityFee(v,{connection:t}),m={ownerAddress:null!=f?f:"",networkID:p,data:{signature:""},type:c.PendingTransactionType.DelegateStake,display:{summary:{topLeft:{label:y("transactionsPendingDelegatingStake")}}}};g.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),type:"delegate"})));const b=yield h({accountIdentifier:e,feePayer:new(0,s.PublicKey)(f),transaction:S,pendingTransactionInput:m});return g.then((e=>e.submittedTransaction(b,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),method:"signAndSendTransaction"}))),{networkID:p,id:null!=b?b:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{g.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{g.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("lEqf0",(function(t,n){e(t.exports,"useDeactivateStake",(function(){return k}),(function(e){return k=e}));var o=a("iOvk1"),r=a("43063"),i=a("7mQ3Y"),s=a("hMVEP"),u=a("csW2r"),c=a("7gANb"),d=a("9W7fs"),l=a("3vaB1");a("9OqWg");var p=a("hIkt0"),f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const k=(e,t,n,a,k)=>{const{t:g}=(0,r.useTranslation)(),{mutateAsync:y}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>f(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,stakeAuthorityPubkey:u,authorizedPubkey:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:p,address:f}=n,h=function({stakePubkey:e,stakeAuthorityPubkey:t,authorizedPubkey:n,transaction:o=new(0,s.Transaction)}){return t.equals(n)||o.add(s.StakeProgram.authorize({authorizedPubkey:n,newAuthorizedPubkey:n,stakeAuthorizationType:s.StakeAuthorizationLayout.Staker,stakePubkey:e})),o.add(s.StakeProgram.deactivate({stakePubkey:e,authorizedPubkey:n})),o}({stakePubkey:r,stakeAuthorityPubkey:u,authorizedPubkey:d}),v=yield a.addPriorityFee(h,{connection:t}),S={ownerAddress:null!=f?f:"",networkID:p,data:{signature:""},type:c.PendingTransactionType.DeactivateStake,display:{summary:{topLeft:{label:g("transactionsPendingDeactivatingStake")}}}};k.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),type:"undelegate"})));const m=yield y({accountIdentifier:e,feePayer:new(0,s.PublicKey)(f),transaction:v,pendingTransactionInput:S});return k.then((e=>e.submittedTransaction(m,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),method:"signAndSendTransaction"}))),k.then((e=>e.deactivateStake())),{networkID:p,id:null!=m?m:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{k.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{k.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("6Bfdh",(function(t,n){e(t.exports,"useKeybaseUserAvatar",(function(){return u}),(function(e){return u=e}));var o=a("5ekp2"),r=a("5SMLK"),i=a("7dNLn"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>{const t=i.stakingQueryKeys.keybaseUserAvatar(e);return(0,o.useQuery)({enabled:!!e,queryKey:t,queryFn(){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("Keybase username is required");return(0,r.getKeybaseUserAvatar)(e)}))},placeholderData:""})}})),a.register("5SMLK",(function(t,n){e(t.exports,"getKeybaseUserAvatar",(function(){return i}),(function(e){return i=e}));var o=a("beWYh"),r=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const i=e=>r(void 0,void 0,void 0,(function*(){var t;const n=yield o.rb.get(`https://keybase.io/_/api/1.0/user/pic_url.json?username=${encodeURIComponent(e)}`);if(!(0,o.responseIsOkay)(n)||0!==(null===(t=n.data.status)||void 0===t?void 0:t.code))throw new Error("Couldn't fetch keybase user avatar");return n.data.pic_url}))})),a.register("48Z1Q",(function(t,n){e(t.exports,"useRecommendedValidators",(function(){return d}),(function(e){return d=e}));var o=a("csW2r"),r=a("5ekp2"),i=a("5u9SD"),s=a("7dNLn"),u=a("kX9T3"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.recommendedValidators();return(0,r.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getRecommendedValidators)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("5u9SD",(function(t,n){e(t.exports,"getRecommendedValidators",(function(){return u}),(function(e){return u=e}));var o=a("beWYh"),r=a("jjhma"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch recommended staking validators.");function u(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/staking/v1/recommended`);if(!(0,o.responseIsOkay)(t))throw s;const n=t.data;return r.RecommendedValidators.parse(n).validators}catch(e){throw s}}))}})),a.register("jjhma",(function(t,n){e(t.exports,"StakeAccountType",(function(){return o})),e(t.exports,"StakeApy",(function(){return u})),e(t.exports,"RecommendedValidators",(function(){return c})),e(t.exports,"StakingRewardsHistory",(function(){return l})),e(t.exports,"LiquidStakingSupportedTokens",(function(){return y}));var o,r,i=a("iOvk1"),s=a("7XqVB");(r=o||(o={})).Initialized="initialized",r.Delegated="delegated";const u=s.z.object({apy:s.z.number()}),c=s.z.object({validators:s.z.array(s.z.string())}),d=s.z.object({epoch:s.z.number(),effectiveSlot:s.z.number(),amount:s.z.number(),postBalance:s.z.number(),percentChange:s.z.number(),apr:s.z.number(),timestamp:s.z.number()}),l=s.z.object({items:s.z.array(d)}),p=s.z.object({address:s.z.string(),chainId:i.NetworkID,decimals:s.z.number(),logoURI:s.z.string(),name:s.z.string(),symbol:s.z.string()}),f=s.z.object({caip19:s.z.string(),metadata:p}),k=s.z.object({vote_account:s.z.string()}),g=s.z.object({apy:s.z.string(),chainId:i.NetworkID,convertRatio:s.z.string(),name:s.z.string(),stakePoolAddress:s.z.string(),stakePoolTokenMetadata:f,validators:s.z.array(k)}),y=s.z.record(s.z.string(),s.z.array(g))})),a.register("kX9T3",(function(t,n){e(t.exports,"CacheTime",(function(){return r})),e(t.exports,"StaleTime",(function(){return s}));var o=a("RVqnc");var r,i,s,u;(i=r||(r={}))[i.Always=1/0]="Always",i[i.Short=(0,o.toMilliseconds)({days:1})]="Short",i[i.Medium=(0,o.toMilliseconds)({days:3})]="Medium",i[i.Long=(0,o.toMilliseconds)({days:7})]="Long",(u=s||(s={}))[u.Immediate=0]="Immediate",u[u.Short=(0,o.toMilliseconds)({minutes:1})]="Short",u[u.Medium=(0,o.toMilliseconds)({minutes:2.5})]="Medium",u[u.Long=(0,o.toMilliseconds)({minutes:5})]="Long",u[u.Never=1/0]="Never"})),a.register("39pK6",(function(t,n){e(t.exports,"useSignatureStatus",(function(){return c}),(function(e){return c=e}));var o=a("5ekp2"),r=a("3vaB1"),i=a("7dNLn"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=(e,t)=>s(void 0,void 0,void 0,(function*(){return yield e.getSignatureStatus(t,{searchTransactionHistory:!0})}));function c(e,t,n,a){var c;const d=i.stakingQueryKeys.signatureStatus(a),l=e.getQueryData(d),p=null===(c=null==l?void 0:l.value)||void 0===c?void 0:c.confirmationStatus,f=!!a&&"finalized"!==p;return(0,o.useQuery)({queryKey:d,queryFn:()=>s(this,void 0,void 0,(function*(){if(!a)throw r.MissingConfirmationSignatureError;return yield u(t,a)})),enabled:f,refetchInterval:n})}})),a.register("gqfgW",(function(t,n){e(t.exports,"useStakeAccountMinBalance",(function(){return c}),(function(e){return c=e}));var o=a("hMVEP"),r=a("5ekp2"),i=a("7dNLn"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>()=>s(void 0,void 0,void 0,(function*(){return yield e.getMinimumBalanceForRentExemption(o.StakeProgram.space)}));function c(e){const t=i.stakingQueryKeys.stakeAccountMinBalance(),n=u(e);return(0,r.useQuery)({queryKey:t,queryFn:n,placeholderData:0})}})),a.register("3cJgq",(function(t,n){e(t.exports,"useStakeAccounts",(function(){return p}),(function(e){return p=e}));var o=a("hMVEP"),r=a("csW2r"),i=a("5ekp2"),s=a("7dNLn"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const c=(e,t)=>u(void 0,void 0,void 0,(function*(){const n=[];t.ownerPublicKey&&n.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&n.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}});const a=yield e.getParsedProgramAccounts(o.StakeProgram.programId,{filters:n});let i=[];if(t.fetchInflationRewards)try{i=yield((e,t,n,...o)=>u(void 0,[e,t,n,...o],void 0,(function*(e,t,n,o="confirmed"){return yield e.getInflationReward(t,n,o)})))(e,a.map((({pubkey:e})=>e)))}catch(e){const t=e;!t.message.includes("RPC request timed out")&&r.telemetry.captureError(t,r.FeatureTag.Staking)}return a.map(((e,t)=>{var n;return Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,inflationReward:null===(n=i[t])||void 0===n?void 0:n.amount},e.account.data.parsed)}))})),d=(e,t)=>s.stakingQueryKeys.stakeAccounts(e,t),l=(e,t)=>()=>c(e,{ownerPublicKey:t,fetchInflationRewards:!0});function p(e,t){const n=d(t,e.rpcEndpoint),o=l(e,t);return(0,i.useQuery)({queryKey:n,queryFn:o,placeholderData:[]})}})),a.register("d5USZ",(function(t,n){e(t.exports,"getStakeActivationData",(function(){return c}),(function(e){return c=e})),e(t.exports,"useStakeActivationData",(function(){return d}),(function(e){return d=e}));var o=a("hMVEP"),r=a("5ekp2"),i=a("3vaB1"),s=a("7dNLn"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const c=(e,t)=>e.getStakeActivation(new(0,o.PublicKey)(t));function d(e,t){const n=s.stakingQueryKeys.stakeActivationData(t),o=!!t;return(0,r.useQuery)({queryKey:n,queryFn:()=>u(this,void 0,void 0,(function*(){if(!t)throw i.MissingPublicKeyError;return yield c(e,t)})),enabled:o})}})),a.register("40bAw",(function(t,n){e(t.exports,"useStakeApy",(function(){return d}),(function(e){return d=e}));var o=a("csW2r"),r=a("5ekp2"),i=a("9Kma9"),s=a("7dNLn"),u=a("kX9T3"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.stakeApy();return(0,r.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getStakingApy)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("9Kma9",(function(t,n){e(t.exports,"getStakingApy",(function(){return u}),(function(e){return u=e}));var o=a("beWYh"),r=a("jjhma"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch staking APY");function u(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/staking/v1/apy`);if(!(0,o.responseIsOkay)(t))throw s;const n=t.data;return r.StakeApy.parse(n).apy}catch(e){throw s}}))}})),a.register("8BkVZ",(function(t,n){e(t.exports,"useStakeRewardsHistory",(function(){return d}),(function(e){return d=e}));var o=a("csW2r"),r=a("wGjeD"),i=a("1xomf"),s=a("7dNLn"),u=a("kX9T3"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function d(e,t,n,a=2){const d=s.stakingQueryKeys.stakeRewardsHistory(t);return(0,r.useInfiniteQuery)({retry:a,enabled:!!t&&!!n,queryKey:d,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn:o=>c(this,[o],void 0,(function*({pageParam:o}){const r=o?{address:t,chainId:n,epoch:o}:{address:t,chainId:n};return(0,i.getStakingRewardsHistory)(e(),r)})),getNextPageParam:({items:e})=>e.length?e[e.length-1].epoch:null,onError:e=>o.telemetry.captureError(e,o.FeatureTag.Staking)})}})),a.register("wGjeD",(function(t,n){e(t.exports,"useInfiniteQuery",(function(){return s}));var o=a("6BSmi"),r=a("iKKzk"),i=a("dsciT");function s(e,t,n){const a=(0,r.parseQueryArgs)(e,t,n);return(0,i.useBaseQuery)(a,o.InfiniteQueryObserver)}})),a.register("6BSmi",(function(t,n){e(t.exports,"InfiniteQueryObserver",(function(){return i}));var o=a("3Pyfv"),r=a("cccYE");class i extends o.QueryObserver{bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,r.infiniteQueryBehavior)()},t)}getOptimisticResult(e){return e.behavior=(0,r.infiniteQueryBehavior)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,o,a,i,s,u;const{state:c}=e;return{...super.createResult(e,t),fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,r.hasNextPage)(t,null==(n=c.data)?void 0:n.pages),hasPreviousPage:(0,r.hasPreviousPage)(t,null==(o=c.data)?void 0:o.pages),isFetchingNextPage:"fetching"===c.fetchStatus&&"forward"===(null==(a=c.fetchMeta)||null==(i=a.fetchMore)?void 0:i.direction),isFetchingPreviousPage:"fetching"===c.fetchStatus&&"backward"===(null==(s=c.fetchMeta)||null==(u=s.fetchMore)?void 0:u.direction)}}constructor(e,t){super(e,t)}}})),a.register("cccYE",(function(t,n){function o(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,o,i,s,u;const c=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,d=null==(o=e.fetchOptions)||null==(i=o.meta)?void 0:i.fetchMore,l=null==d?void 0:d.pageParam,p="forward"===(null==d?void 0:d.direction),f="backward"===(null==d?void 0:d.direction),k=(null==(s=e.state.data)?void 0:s.pages)||[],g=(null==(u=e.state.data)?void 0:u.pageParams)||[];let y=g,h=!1;const v=e.options.queryFn||(()=>Promise.reject("Missing queryFn")),S=(e,t,n,o)=>(y=o?[t,...y]:[...y,t],o?[n,...e]:[...e,n]),m=(t,n,o,r)=>{if(h)return Promise.reject("Cancelled");if(void 0===o&&!n&&t.length)return Promise.resolve(t);const a={queryKey:e.queryKey,pageParam:o,meta:e.meta};var i;i=a,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?h=!0:null==(n=e.signal)||n.addEventListener("abort",(()=>{h=!0})),e.signal}});const s=v(a);return Promise.resolve(s).then((e=>S(t,o,e,r)))};let b;if(k.length)if(p){const t=void 0!==l,n=t?l:r(e.options,k);b=m(k,t,n)}else if(f){const t=void 0!==l,n=t?l:a(e.options,k);b=m(k,t,n,!0)}else{y=[];const t=void 0===e.options.getNextPageParam;b=!c||!k[0]||c(k[0],0,k)?m([],t,g[0]):Promise.resolve(S([],g[0],k[0]));for(let n=1;n<k.length;n++)b=b.then((o=>{if(!c||!k[n]||c(k[n],n,k)){const a=t?g[n]:r(e.options,o);return m(o,t,a)}return Promise.resolve(S(o,g[n],k[n]))}))}else b=m([]);return b.then((e=>({pages:e,pageParams:y})))}}}}function r(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function a(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}function i(e,t){if(e.getNextPageParam&&Array.isArray(t)){const n=r(e,t);return null!=n&&!1!==n}}function s(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const n=a(e,t);return null!=n&&!1!==n}}e(t.exports,"infiniteQueryBehavior",(function(){return o})),e(t.exports,"hasNextPage",(function(){return i})),e(t.exports,"hasPreviousPage",(function(){return s}))})),a.register("1xomf",(function(t,n){e(t.exports,"getStakingRewardsHistory",(function(){return u}),(function(e){return u=e}));var o=a("beWYh"),r=a("jjhma"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch staking rewards history");function u(e,t){return i(this,void 0,void 0,(function*(){let n;try{n=yield o.rb.post(`${e}/staking/v1/history`,t)}catch(e){throw s}if(!(0,o.responseIsOkay)(n))throw s;const a=n.data,i=r.StakingRewardsHistory.safeParse(a);if(i.success)return i.data;throw s}))}})),a.register("kETlb",(function(t,n){e(t.exports,"useValidatorInfo",(function(){return c}),(function(e){return c=e}));var o=a("5ekp2"),r=a("f5UU6"),i=a("7dNLn"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>()=>s(void 0,void 0,void 0,(function*(){return(yield e.getParsedProgramAccounts(r.CONFIG_PROGRAM_ID)).reduce(((e,t)=>{var n;if("validatorInfo"!==(null===(n=t.account.data.parsed)||void 0===n?void 0:n.type))return e;const o=t.pubkey.toString(),r=t.account.data.parsed.info.keys,[,a]=r;if(!a.signer)return e;const i=a.pubkey,s=t.account.data.parsed.info.configData;return e.push({identityPubkey:i,infoPubkey:o,info:s}),e}),[])}));function c(e){const t=i.stakingQueryKeys.validatorInfo(),n=u(e);return(0,o.useQuery)({queryKey:t,queryFn:n,placeholderData:[]})}})),a.register("FEhzp",(function(t,n){e(t.exports,"useValidators",(function(){return c}),(function(e){return c=e}));var o=a("29o0l"),r=a("9TG0W"),i=a("kETlb"),s=a("cJRQS"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function c(e){const{isFetched:t,isFetching:n,isLoading:a,isSuccess:c,isError:d,dataUpdatedAt:l,errorUpdatedAt:p,error:f,refetch:k,data:g}=(0,s.useVoteAccounts)(e),y=Math.max(l,p),{isFetched:h,isFetching:v,isLoading:S,isSuccess:m,isError:b,dataUpdatedAt:A,errorUpdatedAt:w,error:P,refetch:x,data:T}=(0,i.useValidatorInfo)(e),C=Math.max(A,w),E=Math.max(y,C),I=t&&h,L=n||v,N=c||m,D=d||b,O=f||P,M=a||S,F=(0,o.useCallback)((()=>u(this,void 0,void 0,(function*(){Promise.all([k(),x()])}))),[x,k]);return{results:(0,o.useMemo)((()=>{if(!g)return[];if(!T)return[];const e=(0,r.sortVoteAccounts)(g),t=new Map(e.map((e=>[e.identityPubkey,e]))),n=new Map(T.map((e=>[e.identityPubkey,e]))),o=[];for(const[e,r]of t){const t=n.get(e);o.push(Object.assign(Object.assign({},r),t))}return o}),[T,g]),dataUpdatedAt:E,error:O,isSuccess:N,isError:D,isFetched:I,isFetching:L,isLoading:M,refetch:F}}})),a.register("9TG0W",(function(t,n){e(t.exports,"sortVoteAccounts",(function(){return r}));const o=(e,t)=>e+t[1];function r(e){const t=function(e){const t={maxEpochCredits:0,maxActivatedStake:0};for(const n of e){const e=n.epochCredits.reduce(o,0);t.maxEpochCredits<e&&(t.maxEpochCredits=e),t.maxActivatedStake<n.activatedStake&&(t.maxActivatedStake=n.activatedStake)}return t}(e),n=function(e,t,n){return(o,r)=>{const i=a(o,e,t,n);return a(r,e,t,n)-i}}(t.maxEpochCredits,t.maxActivatedStake,{commissionWeight:.6,epochCreditsWeight:.3,activatedStakeWeight:.1});return e.sort(n)}function a(e,t,n,r){const{commission:a,epochCredits:i,activatedStake:s}=e,{commissionWeight:u,epochCreditsWeight:c,activatedStakeWeight:d}=r,{normalizedCommission:l,normalizedEpochCredits:p,normalizedActivatedStake:f}=function(e,t,n,o,r){return{normalizedCommission:(100-e)/100,normalizedEpochCredits:t/n,normalizedActivatedStake:Math.log10(o+1)/Math.log10(r+1)}}(a,i.reduce(o,0),t,s,n);return(a>10?.5:1)*(u*l+c*p+d*f)}})),a.register("cJRQS",(function(t,n){e(t.exports,"useVoteAccounts",(function(){return u}),(function(e){return u=e}));var o=a("5ekp2"),r=a("7dNLn"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=e=>i(void 0,void 0,void 0,(function*(){const t=yield e.getVoteAccounts();return[...t.current,...t.delinquent].map((e=>({identityPubkey:e.nodePubkey,voteAccountPubkey:e.votePubkey,commission:e.commission,lastVote:e.lastVote,epochCredits:e.epochCredits,activatedStake:e.activatedStake}))).filter((e=>e.commission<99))}));function u(e){const t=r.stakingQueryKeys.voteAccounts(e.rpcEndpoint);return(0,o.useQuery)({queryKey:t,queryFn:()=>i(this,void 0,void 0,(function*(){return s(e)})),placeholderData:[]})}})),a.register("efxv4",(function(t,n){e(t.exports,"useWithdrawStake",(function(){return k}),(function(e){return k=e}));var o=a("iOvk1"),r=a("43063"),i=a("7mQ3Y"),s=a("hMVEP"),u=a("csW2r"),c=a("7gANb"),d=a("9W7fs"),l=a("3vaB1");a("9OqWg");var p=a("hIkt0"),f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const k=(e,t,n,a,k)=>{const{t:g}=(0,r.useTranslation)(),{mutateAsync:y}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>f(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,authorizedPubkey:u,amount:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:p,address:f}=n,h=function({stakePubkey:e,authorizedPubkey:t,amount:n,transaction:o=new(0,s.Transaction)}){return o.add(s.StakeProgram.withdraw({stakePubkey:e,authorizedPubkey:t,toPubkey:t,lamports:n})),o}({stakePubkey:r,authorizedPubkey:u,amount:d}),v=yield a.addPriorityFee(h,{connection:t}),S={ownerAddress:null!=f?f:"",networkID:p,data:{signature:""},type:c.PendingTransactionType.WithdrawStake,display:{summary:{topLeft:{label:g("transactionsPendingWithdrawingStake")}}}};k.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),type:"withdraw"})));const m=yield y({accountIdentifier:e,feePayer:new(0,s.PublicKey)(f),transaction:v,pendingTransactionInput:S});return k.then((e=>e.submittedTransaction(m,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(p),method:"signAndSendTransaction"}))),{networkID:p,id:null!=m?m:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{k.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{k.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("bakCR",(function(t,n){e(t.exports,"useConvertStakeAccountInfoPageProps",(function(){return l}));var o=a("iOvk1"),r=a("7mQ3Y"),i=a("29o0l"),s=a("liNiM"),u=a("FEhzp"),c=a("9pwbm"),d=a("kFx26");const l=(e,t,n,a)=>{var l;const{connection:p}=n.useSelectedSolanaConnection(),{data:f}=t.useSelectedChainAddress(r.AddressType.Solana),{initConvertStake:k}=(0,d.useNativeLiquidStaking)(a,o.Chains.solana.mainnetID),{trackConvertModalContinue:g,trackConvertModalNotNow:y}=(0,c.useLiquidStakingAnalytics)(),{results:h,isFetched:v}=(0,u.useValidators)(p),S=(0,i.useMemo)((()=>new Map(h.map((e=>[e.voteAccountPubkey,e])))),[h]),m=(0,s.usePrefetchConvertStakeAccountList)(p,null!==(l=null==f?void 0:f.address)&&void 0!==l?l:"",S,v);return(0,i.useEffect)((()=>{m()}),[m]),(0,i.useEffect)((()=>{k(e)}),[e,k]),{trackConvertModalContinue:g,trackConvertModalNotNow:y}}})),a.register("liNiM",(function(t,n){e(t.exports,"useConvertStakeAccountList",(function(){return g}),(function(e){return g=e})),e(t.exports,"usePrefetchConvertStakeAccountList",(function(){return y}),(function(e){return y=e}));var o=a("hMVEP"),r=a("5ekp2"),i=a("7dHjq"),s=a("29o0l"),u=a("5SMLK"),c=a("7dNLn"),d=a("d5USZ"),l=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const p=(e,t,n)=>l(void 0,void 0,void 0,(function*(){const r=(e=>{const t=[];return e.ownerPublicKey&&t.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&t.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}}),t})(t),a=yield e.getParsedProgramAccounts(o.StakeProgram.programId,{filters:r}),i=(yield Promise.allSettled(a.map((t=>(0,d.getStakeActivationData)(e,t.pubkey.toString()))))).map((e=>{if("fulfilled"===e.status)return e.value.state})),s=(yield Promise.allSettled(a.map((e=>{var t,o,r;const a=null===(t=e.account.data.parsed.info)||void 0===t?void 0:t.stake.delegation.voter,i=n.get(a),s=null===(o=null==i?void 0:i.info)||void 0===o?void 0:o.keybaseUsername,c=null===(r=null==i?void 0:i.info)||void 0===r?void 0:r.iconUrl;return c?new Promise((e=>e(c))):s?(0,u.getKeybaseUserAvatar)(s):new Promise((e=>e(null)))})))).map((e=>{if("fulfilled"===e.status&&null!==e.value)return e.value}));return a.map(((e,t)=>Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,activationState:i[t],imageUri:s[t]},e.account.data.parsed)))})),f=(e,t)=>c.stakingQueryKeys.convertStakeAccountList(e,t),k=(e,t,n)=>()=>p(e,{ownerPublicKey:t},n);function g(e,t,n,o=!0){const a=f(t,e.rpcEndpoint),i=k(e,t,n);return(0,r.useQuery)({queryKey:a,queryFn:i,enabled:!!t&&o})}const y=(e,t,n,o)=>{const r=(0,i.useQueryClient)();return(0,s.useCallback)((()=>l(void 0,void 0,void 0,(function*(){o&&(yield r.prefetchQuery(f(t,e.rpcEndpoint),(()=>p(e,{ownerPublicKey:t},n))))}))),[r,t,e,n,o])}})),a.register("9pwbm",(function(t,n){e(t.exports,"useLiquidStakingAnalytics",(function(){return c}));var o=a("h0VH5"),r=a("iOvk1"),i=a("7mQ3Y"),s=a("29o0l");let u=null;const c=()=>{const e=(0,o.useAnalytics)(),t=(e=>{if(!u&&e){const t="liquidStake";u=new(0,o.SequenceAnalytics)(e,t)}if(!u)throw new Error("liquidStakeAnalytics was not properly configured");return u})(e),n=(0,s.useCallback)(((t,n)=>{e.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:t,stakeAccountBalance:n}}})}),[e]),a=(0,s.useCallback)((t=>{e.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:t}}})}),[e]),c=(0,s.useCallback)((()=>{e.capture("liquidStakingConvertBannerClicked")}),[e]),d=(0,s.useCallback)((()=>{e.capture("liquidStakingConvertBannerSeen")}),[e]),l=(0,s.useCallback)((()=>{e.capture("liquidStakingConvertModalContinue")}),[e]),p=(0,s.useCallback)((()=>{e.capture("liquidStakingConvertModalNotNow")}),[e]),f=(0,s.useCallback)(((t,n,o,r,a,i)=>{e.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:null==t?void 0:t.stakePoolAddress,token:null==t?void 0:t.stakePoolTokenMetadata.metadata.name,fromAmount:o,toAmount:r,fromAmountUSD:a,toAmountUSD:i,apy:null==t?void 0:t.apy,convertRatio:null==t?void 0:t.convertRatio,caip19:null==t?void 0:t.stakePoolTokenMetadata.caip19,validatorName:null==n?void 0:n.validatorName,stakeAccountBalance:null==n?void 0:n.amount}}})}),[e]),k=(0,s.useCallback)((e=>{t.submittedTransaction(e,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:"mainnet",method:"signAndSendTransaction"})}),[t]),g=(0,s.useCallback)(((t,n)=>{e.capture("liquidStakingConvertSuccess",{data:{stake:{apy:null==n?void 0:n.apy,convertRatio:null==n?void 0:n.convertRatio,caip19:null==n?void 0:n.stakePoolTokenMetadata.caip19,stakePoolAddress:null==n?void 0:n.stakePoolAddress,token:null==n?void 0:n.stakePoolTokenMetadata.metadata.name,totalAmount:null==t?void 0:t.amount,validatorName:null==t?void 0:t.validatorName}}})}),[e]);return{trackConvertStakeAccountClicked:n,trackConvertStakeAccountListSeen:a,trackConvertBannerClicked:c,trackConvertBannerSeen:d,trackConvertModalContinue:l,trackConvertModalNotNow:p,trackConvertApprovedByUser:f,trackConvertFailed:(0,s.useCallback)((t=>{e.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:null==t?void 0:t.validatorName,stakeAccountBalance:null==t?void 0:t.amount}}})}),[e]),trackConvertSubmitted:k,trackConvertSuccess:g,trackConvertMoreClicked:(0,s.useCallback)((()=>{e.capture("liquidStakingConvertMoreClicked")}),[e]),trackUnstakeOptionSelected:(0,s.useCallback)((()=>{e.capture("liquidStakingUnstakeOptionSelected")}),[e])}}})),a.register("kFx26",(function(t,n){e(t.exports,"useNativeLiquidStaking",(function(){return i}));var o=a("f5UU6"),r=a("i6CYo");const i=(e,t)=>{const n=o.NETWORK_TO_NATIVE_FUNGIBLE.get(t);return(0,r.useLiquidStaking)(e,n)}})),a.register("i6CYo",(function(t,n){e(t.exports,"useLiquidStaking",(function(){return c}));var o=a("iOvk1"),r=a("5slFC"),i=a("29o0l"),s=a("66NgB");a("bX8dN");var u=a("5HQUf");const c=(e,t)=>{const n=(0,u.useLiquidStakingStore)((e=>e.setProvider)),a=(0,u.useLiquidStakingStore)((e=>e.setFungibleToStake)),c=(0,u.useLiquidStakingStore)((e=>e.setSkipDismissRouting)),d=(0,i.useMemo)((()=>t?(0,o.encodeCaip19)((0,r.getFungibleCaip19FromFungible)(t)):""),[t]),{data:l={},isLoading:p}=(0,s.useLiquidStakingSupportedTokens)(e),f=(0,i.useMemo)((()=>{var e;return null!==(e=l[d])&&void 0!==e?e:[]}),[d,l]),k=(0,i.useCallback)((e=>{const o=f?f[0]:void 0;o&&t&&(a(t),n(o),c(e))}),[t,f,a,n,c]);return{isLoading:p,isSupported:f.length>0,providers:f,initConvertStake:k}}})),a.register("66NgB",(function(t,n){e(t.exports,"useLiquidStakingSupportedTokens",(function(){return d}),(function(e){return d=e}));var o=a("csW2r"),r=a("5ekp2"),i=a("bqBHl"),s=a("7dNLn"),u=a("kX9T3"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.liquidStakingSupportedTokens(e());return(0,r.useQuery)({queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return yield(0,i.getLiquidStakingSupportedTokens)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("bqBHl",(function(t,n){e(t.exports,"getLiquidStakingSupportedTokens",(function(){return c}),(function(e){return c=e}));var o=a("beWYh"),r=a("jjhma"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch liquid staking supported tokens"),u=new Error("Missing supported tokens in response");function c(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/liquid-staking/v1/supported-tokens`);if(!(0,o.responseIsOkay)(t))throw s;const n=r.LiquidStakingSupportedTokens.safeParse(t.data.supportedTokens);if(!n.success)throw u;return n.data}catch(e){throw s}}))}})),a.register("bX8dN",(function(t,n){e(t.exports,"useLiquidStakingStore",(function(){return a("5HQUf").useLiquidStakingStore}));a("5HQUf")})),a.register("5HQUf",(function(n,o){e(n.exports,"useLiquidStakingStore",(function(){return s}));var r=a("gTwcH");const i={transactionData:void 0,fungibleToStake:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",amount:"",validatorName:""},eligibleAccountsCount:0,navigateTo:null,skipDismissRouting:void 0},s=t(r)((e=>Object.assign(Object.assign({},i),{resetStaking:()=>e(i),setTransactionData:t=>e({transactionData:t}),setFungibleToStake:t=>e({fungibleToStake:t}),setProvider:t=>e({provider:t}),setConvertStakeAccount:t=>e({convert:t}),setEligibleAccountsCount:t=>e({eligibleAccountsCount:t}),setNavigateTo:t=>e({navigateTo:t}),setSkipDismissRouting:t=>e({skipDismissRouting:t})})))})),a.register("1C4N1",(function(t,n){e(t.exports,"useConvertStakeAccountListPageProps",(function(){return p}));var o=a("4xbAj"),r=a("7mQ3Y"),i=a("29o0l"),s=a("liNiM"),u=a("FEhzp");a("bX8dN");var c=a("5HQUf"),d=a("jjhma"),l=a("9pwbm");const p=({accountHooks:e,transactionHooks:t,navigateToReviewPage:n})=>{var o,a,d;const p=(0,c.useLiquidStakingStore)((e=>e.setConvertStakeAccount)),k=(0,c.useLiquidStakingStore)((e=>e.setEligibleAccountsCount)),g=(0,c.useLiquidStakingStore)((e=>e.fungibleToStake)),y=(0,c.useLiquidStakingStore)((e=>e.provider)),h=null==y?void 0:y.validators,{connection:v}=t.useSelectedSolanaConnection(),{data:S}=e.useSelectedChainAddress(r.AddressType.Solana),{results:m,isFetched:b,isError:A}=(0,u.useValidators)(v),w=(0,i.useMemo)((()=>new Map(m.map((e=>[e.voteAccountPubkey,e])))),[m]),{trackConvertStakeAccountClicked:P,trackConvertStakeAccountListSeen:x}=(0,l.useLiquidStakingAnalytics)(),{data:T,isLoading:C,isFetching:E,error:I,refetch:L}=(0,s.useConvertStakeAccountList)(v,null!==(o=null==S?void 0:S.address)&&void 0!==o?o:"",w,b||A),N=C||E,D=(0,i.useMemo)((()=>h?new Map(h.map((e=>[e.vote_account,e]))):new Map),[h]),O=(0,i.useMemo)((()=>N||!T?[]:T.slice().map((e=>f(e,w,D))).sort(((e,t)=>e.lamports>t.lamports?-1:1))),[N,T,w,D]),M=(0,i.useMemo)((()=>O.filter((e=>e.eligible))),[O]),F=(0,i.useMemo)((()=>O.filter((e=>!e.eligible))),[O]);(0,i.useEffect)((()=>{N||x(O.map((e=>({title:e.title,amount:e.amount,eligible:e.eligible}))))}),[x,O,N]);const _=(0,i.useCallback)((e=>{var t,o,r,a,i,s;const u=null!==(a=null===(r=null===(o=null===(t=null==e?void 0:e.info)||void 0===t?void 0:t.stake)||void 0===o?void 0:o.delegation)||void 0===r?void 0:r.voter)&&void 0!==a?a:"",c=`${null!==(i=null==e?void 0:e.lamports)&&void 0!==i?i:"0"}`,d=null!==(s=null==e?void 0:e.title)&&void 0!==s?s:"";p({validatorVote:u,amount:c,stakeAccount:e.pubkey,validatorName:d}),k(M.length),P(d,c),n()}),[P,M.length,n,p,k]),K=(0,i.useCallback)((()=>{L()}),[L]);return{isLoading:N,error:I,eligibleStakeAccounts:M,inelegibleStakeAccounts:F,onReload:K,onSelectStakeAccount:_,tokenSymbol:null!==(a=null==g?void 0:g.data.symbol)&&void 0!==a?a:"",tokenDecimals:null!==(d=null==g?void 0:g.data.decimals)&&void 0!==d?d:0}},f=(e,t,n)=>{const o=k(e,n),r=g(e,t),a=e.lamports;return Object.assign(Object.assign({},e),{amount:a,eligible:o,title:r,imageUri:e.imageUri})},k=(e,t)=>{var n,o,r,a;if(e.type===d.StakeAccountType.Initialized)return!1;const i=null!==(a=null===(r=null===(o=null===(n=null==e?void 0:e.info)||void 0===n?void 0:n.stake)||void 0===o?void 0:o.delegation)||void 0===r?void 0:r.voter)&&void 0!==a?a:"";return"active"===e.activationState&&t.has(i)},g=(e,t)=>{var n,r,a;let i="";if(e.type===d.StakeAccountType.Delegated){const{voter:s}=e.info.stake.delegation,u=t.get(s),c=null===(n=null==u?void 0:u.info)||void 0===n?void 0:n.keybaseUsername,d=null===(r=null==u?void 0:u.info)||void 0===r?void 0:r.name;i=null!==(a=null!=d?d:c)&&void 0!==a?a:(0,o.formatHashMedium)(s)}else e.type===d.StakeAccountType.Initialized&&(i=e.pubkey);return i}})),a.register("fcYa8",(function(t,n){e(t.exports,"useConvertStakeAccountReviewPageProps",(function(){return h}));var o=a("iOvk1"),r=a("5slFC"),i=a("43063"),s=a("7mQ3Y"),u=a("kram9"),c=a("RVqnc"),d=a("29o0l"),l=a("k9HWV");a("bX8dN");var p=a("5HQUf"),f=a("9pwbm"),k=a("hDvW4");const g=(e,t,n,a)=>{var s,d;if(!t||!n||!e)return null;const l=((e,t)=>{if(!e||!t)return(0,c.BigNumber)(0);const n=new(0,c.BigNumber)(e.amount),o=new(0,c.BigNumber)(t.convertRatio);return(0,c.amountToUiAmount)(n,t.stakePoolTokenMetadata.metadata.decimals).div(o)})(n,t),p=a?a[t.stakePoolTokenMetadata.caip19]:void 0,f=(null==p?void 0:p.usd)?l.multipliedBy(p.usd):null;return{amount:(0,u.formatTokenAmountGreaterThan1)(l),amountUsd:f?`$${(0,u.formatTokenAmountGreaterThan1)(f)}`:"",border:!1,network:{id:null!==(s=t.stakePoolTokenMetadata.metadata.chainId)&&void 0!==s?s:o.SolanaNetworkID.Mainnet,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},logoUri:null!==(d=t.stakePoolTokenMetadata.metadata.logoURI)&&void 0!==d?d:null,symbol:t.stakePoolTokenMetadata.metadata.symbol,title:i.i18next.t("convertStakeReviewYouReceive"),tokenAddress:t.stakePoolTokenMetadata.metadata.address,tokenType:r.FungibleTokenType.SPL}},y=({fungibleToStake:e,convertDetails:t,provider:n,selectedChainAddress:o,transactionFees:a,isLoading:s,canConvert:l,priceMap:p,networkFeeErrorMsg:f})=>{var k,y,h;const v=(0,d.useMemo)((()=>((e,t,n)=>{var o,a;if(!e||!t)return null;const s=(0,c.amountToUiAmount)(t.amount,e.data.decimals),d=(0,u.extractPrice)(e,n),l=(null==d?void 0:d.usd)?s.multipliedBy(d.usd):null;return{amount:(0,u.formatTokenAmountGreaterThan1)(s),amountUsd:l?`$${(0,u.formatTokenAmountGreaterThan1)(l)}`:"",border:!1,logoUri:null!==(o=e.data.logoUri)&&void 0!==o?o:null,network:{id:e.data.chain.id,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},symbol:e.data.symbol,tokenAddress:e.data.tokenAddress,tokenType:null!==(a=e.type)&&void 0!==a?a:r.FungibleTokenType.SolanaNative,title:i.i18next.t("convertStakeReviewYouPay")}})(e,t,p)),[e,t,p]),S=(0,d.useMemo)((()=>g(e,n,t,p)),[e,n,t,p]),m=null!==(k=null==n?void 0:n.name)&&void 0!==k?k:"";return{payAsset:v,receiveAsset:S,account:null!==(y=null==o?void 0:o.address)&&void 0!==y?y:"",providerName:m,apy:void 0!==(null==n?void 0:n.apy)?(0,c.formatPercentage)(Number.parseFloat(n.apy)):"",networkFee:`${(0,r.formatAmount)((0,c.amountToUiAmount)(a,null!==(h=null==e?void 0:e.data.decimals)&&void 0!==h?h:0))} ${null==e?void 0:e.data.symbol}`,accountLabelText:i.i18next.t("stakeReviewAccount"),providerLabelText:i.i18next.t("convertStakeReviewProvider"),apyLabelText:i.i18next.t("stakeReviewAPY"),networkFeeLabelText:i.i18next.t("convertStakeReviewNetworkFee"),primaryButtonText:i.i18next.t("commandConvert"),isLoading:s,canConvert:l,networkFeeErrorMsg:f}},h=({accountHooks:e,fungibleHooks:t,transactionHooks:n,priceHooks:a,priorityFeeService:i,navigateToStatusPage:u})=>{var c,g,h,v,S;const{data:m}=e.useSelectedChainAddress(s.AddressType.Solana),{trackConvertApprovedByUser:b}=(0,f.useLiquidStakingAnalytics)(),A=(0,p.useLiquidStakingStore)((e=>e.fungibleToStake)),w=(0,p.useLiquidStakingStore)((e=>e.convert)),P=(0,p.useLiquidStakingStore)((e=>e.provider)),x=(0,p.useLiquidStakingStore)((e=>e.setTransactionData)),{connection:T}=n.useSelectedSolanaConnection(),{fungible:C,isLoadingTokens:E}=t.useGetFungibleBalance({key:(null==P?void 0:P.stakePoolTokenMetadata.metadata.address)||""}),I=C?(0,r.parseOwnerAddress)(C):void 0,{data:L,isLoading:N}=(0,l.useGetConvertStakeAccountTransaction)({connection:T,networkId:null!==(c=null==P?void 0:P.chainId)&&void 0!==c?c:o.Chains.solana.mainnetID,stakePoolAddress:null!==(g=null==P?void 0:P.stakePoolAddress)&&void 0!==g?g:"",ownerAddress:null!==(h=null==m?void 0:m.address)&&void 0!==h?h:"",validatorVoteAddress:null!==(v=null==w?void 0:w.validatorVote)&&void 0!==v?v:"",stakeAccountAddress:null!==(S=null==w?void 0:w.stakeAccount)&&void 0!==S?S:"",poolTokenAccountAddress:I,priorityFeeService:i}),{isLoading:D,hasSufficientFunds:O,transactionFees:M,networkFeeErrorMsg:F}=(0,k.useLiquidStakingTransactionFees)({chainAddress:m,fungibleHooks:t,transactionData:L,transactionHooks:n}),_=(0,d.useMemo)((()=>{var e;const t=[],n=A?(0,r.getFungibleCaip19FromFungible)(A):void 0,a=(0,o.decodeCaip19)(null!==(e=null==P?void 0:P.stakePoolTokenMetadata.caip19)&&void 0!==e?e:"");return n&&a&&(t.push(n),t.push(a)),{query:{data:t}}}),[A,P]),{data:K}=a.usePrices(_),q=N||D||E,R=y({fungibleToStake:A,convertDetails:w,provider:P,selectedChainAddress:m,transactionFees:M,isLoading:q,canConvert:!q&&!!L&&"insufficient"!==O&&!F,priceMap:K,networkFeeErrorMsg:F}),U=(0,d.useCallback)((()=>{var e,t,n,o;b(P,w,null===(e=R.payAsset)||void 0===e?void 0:e.amount,null===(t=R.receiveAsset)||void 0===t?void 0:t.amount,null===(n=R.payAsset)||void 0===n?void 0:n.amountUsd,null===(o=R.receiveAsset)||void 0===o?void 0:o.amountUsd),x(L),u()}),[u,x,L,b,w,P,R]);return Object.assign(Object.assign({},R),{onPrimaryButtonPress:U})}})),a.register("k9HWV",(function(t,n){e(t.exports,"useGetConvertStakeAccountTransaction",(function(){return d}),(function(e){return d=e}));var o=a("iOvk1"),r=a("csW2r"),i=a("5ekp2");a("ls3Bv");var s=a("aye90"),u=a("7dNLn"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=e=>{const t=u.stakingQueryKeys.getConvertStakeTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,validatorVoteAddress:e.validatorVoteAddress,stakeAccountAddress:e.stakeAccountAddress,poolTokenAccountAddress:e.poolTokenAccountAddress}),n=!!(e.stakePoolAddress&&e.ownerAddress&&e.validatorVoteAddress&&e.stakeAccountAddress);return(0,i.useQuery)({enabled:n,queryKey:t,queryFn(){return c(this,void 0,void 0,(function*(){if(o.Chains.isSolanaNetworkID(e.networkId)){const{transaction:t,signers:n}=yield(0,s.getConvertStakeAccountTransaction)(e);return{networkID:e.networkId,transaction:t,signers:n}}throw new Error(`Unsupported networkId: ${e.networkId}`)}))},onError(e){r.telemetry.captureError(e,r.FeatureTag.Staking)}})}})),a.register("ls3Bv",(function(t,n){e(t.exports,"getConvertStakeAccountTransaction",(function(){return a("aye90").getConvertStakeAccountTransaction}));a("aye90")})),a.register("aye90",(function(t,n){e(t.exports,"getConvertStakeAccountTransaction",(function(){return d}),(function(e){return d=e}));var o=a("iOvk1"),r=a("hMVEP"),i=a("7gANb"),s=a("8kUwL"),u=a("jsXSE"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=e=>c(void 0,[e],void 0,(function*({connection:e,stakePoolAddress:t,ownerAddress:n,validatorVoteAddress:a,stakeAccountAddress:c,poolTokenAccountAddress:d,priorityFeeService:l}){const p=new(0,r.PublicKey)(t),f=new(0,r.PublicKey)(n),k=new(0,r.PublicKey)(a),g=new(0,r.PublicKey)(c),y=d?new(0,r.PublicKey)(d):void 0,h=new(0,r.PublicKey)((0,s.getReferralAccount)(n)),{instructions:v,signers:S}=yield(0,u.depositStake)(e,p,f,k,g,y,h),m=(yield e.getLatestBlockhash("confirmed")).blockhash,b=new(0,r.VersionedTransaction)(new(0,r.TransactionMessage)({instructions:v,payerKey:f,recentBlockhash:m}).compileToV0Message());return{transaction:yield l.addPriorityFee(b,{connection:(0,i.createConnectionBySolanaNetworkID)(o.NetworkIDs.Solana.Mainnet),calculators:{cost:i.BACKEND_FEE_CALCULATOR,budget:new(0,i.ComputeOptimizedLimitCalculator)(i.DEFAULT_COMPUTE_UNITS_PER_IX,i.DEFAULT_COMPUTE_UNITS_PER_IX)}}),signers:S}}))})),a.register("8kUwL",(function(n,o){e(n.exports,"getReferralAccount",(function(){return c}));var r=a("kK5gs"),i=a("85iHy"),s=a("8tcqI").Buffer;const u=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],c=e=>{const n=`${String.fromCharCode(...u)}||${e}`,o=(0,r.sha256)(s.from(n));return t(i).encode(o)}})),a.register("kK5gs",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sha224=e.exports.sha256=void 0;var n=a("629sm"),o=a("729hD");const r=(e,t,n)=>e&t^e&n^t&n,i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint32Array(64);class c extends n.SHA2{get(){const{A:e,B:t,C:n,D:o,E:r,F:a,G:i,H:s}=this;return[e,t,n,o,r,a,i,s]}set(e,t,n,o,r,a,i,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|o,this.E=0|r,this.F=0|a,this.G=0|i,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)u[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=u[e-15],n=u[e-2],r=(0,o.rotr)(t,7)^(0,o.rotr)(t,18)^t>>>3,a=(0,o.rotr)(n,17)^(0,o.rotr)(n,19)^n>>>10;u[e]=a+u[e-7]+r+u[e-16]|0}let{A:n,B:a,C:s,D:c,E:d,F:l,G:p,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,o.rotr)(d,6)^(0,o.rotr)(d,11)^(0,o.rotr)(d,25))+((k=d)&l^~k&p)+i[e]+u[e]|0,g=((0,o.rotr)(n,2)^(0,o.rotr)(n,13)^(0,o.rotr)(n,22))+r(n,a,s)|0;f=p,p=l,l=d,d=c+t|0,c=s,s=a,a=n,n=t+g|0}var k;n=n+this.A|0,a=a+this.B|0,s=s+this.C|0,c=c+this.D|0,d=d+this.E|0,l=l+this.F|0,p=p+this.G|0,f=f+this.H|0,this.set(n,a,s,c,d,l,p,f)}roundClean(){u.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}}class d extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.exports.sha256=(0,o.wrapConstructor)((()=>new c)),e.exports.sha224=(0,o.wrapConstructor)((()=>new d))})),a.register("629sm",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SHA2=void 0;var n=a("cfNwb"),o=a("729hD");class r extends o.Hash{update(e){(0,n.exists)(this);const{view:t,buffer:r,blockLen:a}=this,i=(e=(0,o.toBytes)(e)).length;for(let n=0;n<i;){const s=Math.min(a-this.pos,i-n);if(s!==a)r.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===a&&(this.process(t,0),this.pos=0);else{const t=(0,o.createView)(e);for(;a<=i-n;n+=a)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.exists)(this),(0,n.output)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:a,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>a-s&&(this.process(r,0),s=0);for(let e=s;e<a;e++)t[e]=0;!function(e,t,n,o){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,o);const r=BigInt(32),a=BigInt(4294967295),i=Number(n>>r&a),s=Number(n&a),u=o?4:0,c=o?0:4;e.setUint32(t+u,i,o),e.setUint32(t+c,s,o)}(r,a-8,BigInt(8*this.length),i),this.process(r,0);const u=(0,o.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)u.setUint32(4*e,l[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:o,finished:r,destroyed:a,pos:i}=this;return e.length=o,e.pos=i,e.finished=r,e.destroyed=a,o%t&&e.buffer.set(n),e}constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,o.createView)(this.buffer)}}e.exports.SHA2=r})),a.register("cfNwb",(function(e,t){"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function o(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function r(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function a(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function s(e,t){r(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.output=e.exports.exists=e.exports.hash=e.exports.bytes=e.exports.bool=e.exports.number=void 0,e.exports.number=n,e.exports.bool=o,e.exports.bytes=r,e.exports.hash=a,e.exports.exists=i,e.exports.output=s;const u={number:n,bool:o,bytes:r,hash:a,exists:i,output:s};e.exports.default=u})),a.register("729hD",(function(e,t){"use strict";
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.randomBytes=e.exports.wrapXOFConstructorWithOpts=e.exports.wrapConstructorWithOpts=e.exports.wrapConstructor=e.exports.checkOpts=e.exports.Hash=e.exports.concatBytes=e.exports.toBytes=e.exports.utf8ToBytes=e.exports.asyncLoop=e.exports.nextTick=e.exports.hexToBytes=e.exports.bytesToHex=e.exports.isLE=e.exports.rotr=e.exports.createView=e.exports.u32=e.exports.u8=void 0;var n=a("cX2qN");const o=e=>e instanceof Uint8Array;e.exports.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.exports.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.exports.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(e.exports.rotr=(e,t)=>e<<32-t|e>>>t,e.exports.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.exports.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.exports.bytesToHex=function(e){if(!o(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.exports.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const o=2*t,r=e.slice(o,o+2),a=Number.parseInt(r,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[t]=a}return n};function i(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function s(e){if("string"==typeof e&&(e=i(e)),!o(e))throw new Error("expected Uint8Array, got "+typeof e);return e}e.exports.nextTick=async()=>{},e.exports.asyncLoop=async function(t,n,o){let r=Date.now();for(let a=0;a<t;a++){o(a);const t=Date.now()-r;t>=0&&t<n||(await(0,e.exports.nextTick)(),r+=t)}},e.exports.utf8ToBytes=i,e.exports.toBytes=s,e.exports.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!o(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t};e.exports.Hash=class{clone(){return this._cloneInto()}};const u={}.toString;e.exports.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==u.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.exports.wrapConstructor=function(e){const t=t=>e().update(s(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.exports.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.exports.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.exports.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}})),a.register("cX2qN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.crypto=void 0,e.exports.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0})),a.register("jsXSE",(function(n,o){e(n.exports,"depositStake",(function(){return y}),(function(e){return y=e}));var r=a("hMVEP"),i=a("fxZCU"),s=a("dNfx5"),u=a("c1rzP"),c=a("1ZOZY"),d=a("kEQoY"),l=a("jMFTJ"),p=a("8tcqI").Buffer,f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function k(e,t){return f(this,void 0,void 0,(function*(){const n=yield e.getAccountInfo(t);if(!n)throw new Error("Invalid stake pool account");return{pubkey:t,account:{data:l.StakePoolLayout.decode(n.data),executable:n.executable,lamports:n.lamports,owner:n.owner}}}))}function g(e,t){return f(this,void 0,void 0,(function*(){const[n]=yield r.PublicKey.findProgramAddress([t.toBuffer(),p.from("withdraw")],e);return n}))}function y(e,n,o,a,l,y,h){return f(this,void 0,void 0,(function*(){const v=yield k(e,n),S=yield g(c.STAKE_POOL_PROGRAM_ID,n),m=yield function(e,n,o,a){return f(this,void 0,void 0,(function*(){const[i]=yield r.PublicKey.findProgramAddress([n.toBuffer(),o.toBuffer(),a?new(t(u))(a).toArrayLike(p,"le",4):p.alloc(0)],e);return i}))}(c.STAKE_POOL_PROGRAM_ID,a,n),b=[],A=v.account.data.poolMint;if(!y){const e=(0,s.getAssociatedTokenAddressSync)(A,o);b.push((0,i.createAssociatedTokenAccountIdempotentInstruction)(o,e,o,A)),y=e}return b.push(...r.StakeProgram.authorize({stakePubkey:l,authorizedPubkey:o,newAuthorizedPubkey:v.account.data.stakeDepositAuthority,stakeAuthorizationType:r.StakeAuthorizationLayout.Staker}).instructions),b.push(...r.StakeProgram.authorize({stakePubkey:l,authorizedPubkey:o,newAuthorizedPubkey:v.account.data.stakeDepositAuthority,stakeAuthorizationType:r.StakeAuthorizationLayout.Withdrawer}).instructions),b.push(d.StakePoolInstruction.depositStake({stakePool:n,validatorList:v.account.data.validatorList,depositAuthority:v.account.data.stakeDepositAuthority,reserveStake:v.account.data.reserveStake,managerFeeAccount:v.account.data.managerFeeAccount,referralPoolAccount:y,destinationPoolAccount:y,withdrawAuthority:S,depositStake:l,validatorStake:m,poolMint:A,referralAccount:h})),{instructions:b,signers:[]}}))}})),a.register("fxZCU",(function(t,n){e(t.exports,"createAssociatedTokenAccountInstruction",(function(){return s})),e(t.exports,"createAssociatedTokenAccountIdempotentInstruction",(function(){return u}));var o=a("liYfk"),r=a("bfrkk"),i=a("8tcqI").Buffer;function s(e,t,n,o,a=r.TOKEN_PROGRAM_ID,s=r.ASSOCIATED_TOKEN_PROGRAM_ID){return c(e,t,n,o,i.alloc(0),a,s)}function u(e,t,n,o,a=r.TOKEN_PROGRAM_ID,s=r.ASSOCIATED_TOKEN_PROGRAM_ID){return c(e,t,n,o,i.from([1]),a,s)}function c(e,t,n,a,i,s=r.TOKEN_PROGRAM_ID,u=r.ASSOCIATED_TOKEN_PROGRAM_ID){const c=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new(0,o.TransactionInstruction)({keys:c,programId:u,data:i})}})),a.register("1ZOZY",(function(t,n){e(t.exports,"STAKE_POOL_PROGRAM_ID",(function(){return o}));const o=new(0,a("hMVEP").PublicKey)("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy")})),a.register("kEQoY",(function(t,n){e(t.exports,"StakePoolInstruction",(function(){return d}));var o=a("hMVEP"),r=a("bfrkk"),i=a("1ZOZY"),s=a("8tcqI").Buffer;const u=Object.freeze({DepositStake:{index:9,layout:o.BufferLayout.struct([o.BufferLayout.u8("instruction")])},DepositSol:{index:14,layout:o.BufferLayout.struct([o.BufferLayout.u8("instruction"),o.BufferLayout.ns64("lamports")])}});function c(e,t){const n=e.layout.span,o=s.alloc(n),r=Object.assign({instruction:e.index},t);return e.layout.encode(r,o),o}class d{static depositStake(e){const{stakePool:t,validatorList:n,depositAuthority:a,withdrawAuthority:s,depositStake:d,validatorStake:l,reserveStake:p,destinationPoolAccount:f,managerFeeAccount:k,referralPoolAccount:g,poolMint:y,referralAccount:h}=e,v=c(u.DepositStake),S=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:o.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:o.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:r.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:o.StakeProgram.programId,isSigner:!1,isWritable:!1}];return h&&S.push({pubkey:h,isSigner:!1,isWritable:!1}),new(0,o.TransactionInstruction)({programId:i.STAKE_POOL_PROGRAM_ID,keys:S,data:v})}static depositSol(e){const{stakePool:t,withdrawAuthority:n,depositAuthority:a,reserveStake:s,fundingAccount:d,destinationPoolAccount:l,managerFeeAccount:p,referralPoolAccount:f,poolMint:k,lamports:g}=e,y=c(u.DepositSol,{lamports:g}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:r.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!0,isWritable:!1}),new(0,o.TransactionInstruction)({programId:i.STAKE_POOL_PROGRAM_ID,keys:h,data:y})}}})),a.register("jMFTJ",(function(t,n){e(t.exports,"StakePoolLayout",(function(){return i}));var o=a("6m1jp");const r=[(0,o.u64)("denominator"),(0,o.u64)("numerator")],i=(0,o.struct)([(0,o.u8)("accountType"),(0,o.publicKey)("manager"),(0,o.publicKey)("staker"),(0,o.publicKey)("stakeDepositAuthority"),(0,o.u8)("stakeWithdrawBumpSeed"),(0,o.publicKey)("validatorList"),(0,o.publicKey)("reserveStake"),(0,o.publicKey)("poolMint"),(0,o.publicKey)("managerFeeAccount"),(0,o.publicKey)("tokenProgramId"),(0,o.u64)("totalLamports"),(0,o.u64)("poolTokenSupply"),(0,o.u64)("lastUpdateEpoch"),(0,o.struct)([(0,o.u64)("unixTimestamp"),(0,o.u64)("epoch"),(0,o.publicKey)("custodian")],"lockup"),(0,o.struct)(r,"epochFee"),(0,o.option)((0,o.struct)(r),"nextEpochFee"),(0,o.option)((0,o.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,o.option)((0,o.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,o.struct)(r,"stakeDepositFee"),(0,o.struct)(r,"stakeWithdrawalFee"),(0,o.option)((0,o.struct)(r),"nextStakeWithdrawalFee"),(0,o.u8)("stakeReferralFee"),(0,o.option)((0,o.publicKey)(),"solDepositAuthority"),(0,o.struct)(r,"solDepositFee"),(0,o.u8)("solReferralFee"),(0,o.option)((0,o.publicKey)(),"solWithdrawAuthority"),(0,o.struct)(r,"solWithdrawalFee"),(0,o.option)((0,o.struct)(r),"nextSolWithdrawalFee"),(0,o.u64)("lastEpochPoolTokenSupply"),(0,o.u64)("lastEpochTotalLamports")])})),a.register("6m1jp",(function(e,t){var n=a("8tcqI").Buffer,o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.map=e.exports.array=e.exports.rustEnum=e.exports.str=e.exports.vecU8=e.exports.tagged=e.exports.vec=e.exports.bool=e.exports.option=e.exports.publicKey=e.exports.i256=e.exports.u256=e.exports.i128=e.exports.u128=e.exports.i64=e.exports.u64=e.exports.struct=e.exports.f64=e.exports.f32=e.exports.i32=e.exports.u32=e.exports.i16=e.exports.u16=e.exports.i8=e.exports.u8=void 0;var r=a("lCwV5"),i=a("liYfk");const s=o(a("c1rzP"));r=a("lCwV5");Object.defineProperty(e.exports,"u8",{enumerable:!0,get:function(){return r.u8}}),Object.defineProperty(e.exports,"i8",{enumerable:!0,get:function(){return r.s8}}),Object.defineProperty(e.exports,"u16",{enumerable:!0,get:function(){return r.u16}}),Object.defineProperty(e.exports,"i16",{enumerable:!0,get:function(){return r.s16}}),Object.defineProperty(e.exports,"u32",{enumerable:!0,get:function(){return r.u32}}),Object.defineProperty(e.exports,"i32",{enumerable:!0,get:function(){return r.s32}}),Object.defineProperty(e.exports,"f32",{enumerable:!0,get:function(){return r.f32}}),Object.defineProperty(e.exports,"f64",{enumerable:!0,get:function(){return r.f64}}),Object.defineProperty(e.exports,"struct",{enumerable:!0,get:function(){return r.struct}});class u extends r.Layout{decode(e,t=0){const n=new s.default(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}encode(e,t,o=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(n,"le",this.span),t,o)}constructor(e,t,n){super(e,n),this.blob=(0,r.blob)(e),this.signed=t}}function c(e){return new u(8,!1,e)}e.exports.u64=c,e.exports.i64=function(e){return new u(8,!0,e)},e.exports.u128=function(e){return new u(16,!1,e)},e.exports.i128=function(e){return new u(16,!0,e)},e.exports.u256=function(e){return new u(32,!1,e)},e.exports.i256=function(e){return new u(32,!0,e)};class d extends r.Layout{decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}constructor(e,t,n,o){super(e.span,o),this.layout=e,this.decoder=t,this.encoder=n}}e.exports.publicKey=function(e){return new d((0,r.blob)(32),(e=>new i.PublicKey(e)),(e=>e.toBuffer()),e)};class l extends r.Layout{encode(e,t,n=0){return null==e?this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+1)+1)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return 1;if(1===n)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,r.u8)()}}function p(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function f(e){return e?1:0}function k(e){const t=(0,r.u32)("length"),n=(0,r.struct)([t,(0,r.blob)((0,r.offset)(t,-t.span),"data")]);return new d(n,(({data:e})=>e),(e=>({data:e})),e)}e.exports.option=function(e,t){return new l(e,t)},e.exports.bool=function(e){return new d((0,r.u8)(),p,f,e)},e.exports.vec=function(e,t){const n=(0,r.u32)("length"),o=(0,r.struct)([n,(0,r.seq)(e,(0,r.offset)(n,-n.span),"values")]);return new d(o,(({values:e})=>e),(e=>({values:e})),t)},e.exports.tagged=function(e,t,n){const o=(0,r.struct)([c("tag"),t.replicate("data")]);return new d(o,(function({tag:t,data:n}){if(!t.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+t.toString("hex"));return n}),(t=>({tag:e,data:t})),n)},e.exports.vecU8=k,e.exports.str=function(e){return new d(k(),(e=>e.toString("utf-8")),(e=>n.from(e,"utf-8")),e)},e.exports.rustEnum=function(e,t,n){const o=(0,r.union)(null!=n?n:(0,r.u8)(),t);return e.forEach(((e,t)=>o.addVariant(t,e,e.property))),o},e.exports.array=function(e,t,n){const o=(0,r.struct)([(0,r.seq)(e,t,"values")]);return new d(o,(({values:e})=>e),(e=>({values:e})),n)};class g extends r.Layout{decode(e,t){t=t||0;return[this.keyLayout.decode(e,t),this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t))]}encode(e,t,n){n=n||0;const o=this.keyLayout.encode(e[0],t,n);return o+this.valueLayout.encode(e[1],t,n+o)}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}constructor(e,t,n){super(e.span+t.span,n),this.keyLayout=e,this.valueLayout=t}}e.exports.map=function(e,t,n){const o=(0,r.u32)("length"),a=(0,r.struct)([o,(0,r.seq)(new g(e,t),(0,r.offset)(o,-o.span),"values")]);return new d(a,(({values:e})=>new Map(e)),(e=>({values:Array.from(e.entries())})),n)}})),a.register("hDvW4",(function(t,n){e(t.exports,"useLiquidStakingTransactionFees",(function(){return c}));var o=a("iOvk1"),r=a("43063"),i=a("RVqnc"),s=a("29o0l");const u=(0,i.toMilliseconds)({seconds:10}),c=({chainAddress:e,fungibleHooks:t,transactionData:n,transactionHooks:r})=>{var a,i;const{data:c,isLoading:f,isFetched:k,isSuccess:g}=r.useGasEstimation({networkID:null!==(a=null==n?void 0:n.networkID)&&void 0!==a?a:o.Chains.solana.mainnetID,multichainTransaction:l(n),queryOptions:{refetchInterval:u}}),{hasSufficientFunds:y,isLoading:h,nativeTokenSymbol:v}=t.useHasSufficientFunds(null!==(i=null==n?void 0:n.networkID)&&void 0!==i?i:o.Chains.solana.mainnetID,null==e?void 0:e.addressType,c,void 0),S=p({hasSufficientFunds:y,hasGasEstimationFailed:k&&!g,nativeTokenSymbol:v}),m=d(c),b=f||h;return(0,s.useMemo)((()=>({isLoading:b,hasSufficientFunds:y,transactionFees:m,networkFeeErrorMsg:S,nativeTokenSymbol:v})),[b,y,m,S,v])},d=e=>e&&o.Chains.isSolanaNetworkID(e.networkID)?new(0,i.BigNumber)(e.value):new(0,i.BigNumber)(0),l=e=>{if(e&&o.Chains.isSolanaNetworkID(e.networkID)){const{networkID:t,transaction:n}=e;return{networkID:t,transaction:[n]}}},p=({hasSufficientFunds:e,hasGasEstimationFailed:t,nativeTokenSymbol:n})=>t?r.i18next.t("transactionGasEstimationError"):"insufficient"===e?r.i18next.t("transactionNotEnoughNative",{nativeTokenSymbol:n}):void 0})),a.register("120WT",(function(t,n){e(t.exports,"useConvertStakeAccountStatusPageProps",(function(){return h}),(function(e){return h=e}));var o=a("4xbAj"),r=a("43063"),i=a("7mQ3Y"),s=a("7gANb"),u=a("29o0l"),c=a("3vaB1"),d=a("890aa");a("bX8dN");var l=a("5HQUf");a("9OqWg");var p=a("hIkt0"),f=a("7umtj"),k=a("9pwbm"),g=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const y="https://www.jito.network/defi/";const h=({accountSigner:e,accountHooks:t,storage:n,transactionHooks:a,fungibleHooks:h,queryClient:v,dismissConvertFlow:S,goToConvertAccountList:m})=>{var b,A,w,P,x,T;const C=(e=>(0,u.useCallback)((()=>(0,p.invalidateAllStakeAccountData)(e)()),[e]))(v),[E,I]=(0,u.useState)("loading"),[L,N]=(0,u.useState)(),[D,O]=(0,u.useState)(),{trackConvertSubmitted:M,trackConvertSuccess:F,trackConvertFailed:_,trackConvertMoreClicked:K}=(0,k.useLiquidStakingAnalytics)(),q=(0,l.useLiquidStakingStore)((e=>e.fungibleToStake)),R=(0,l.useLiquidStakingStore)((e=>e.provider)),U=(0,l.useLiquidStakingStore)((e=>e.convert)),B=(0,l.useLiquidStakingStore)((e=>e.eligibleAccountsCount)),V=(0,l.useLiquidStakingStore)((e=>e.transactionData)),W=(0,l.useLiquidStakingStore)((e=>e.setConvertStakeAccount)),j=(0,l.useLiquidStakingStore)((e=>e.setTransactionData)),H=null!==(b=null==q?void 0:q.data.symbol)&&void 0!==b?b:"",z=null!==(A=null==R?void 0:R.stakePoolTokenMetadata.metadata.symbol)&&void 0!==A?A:"",Q=null!==(w=null==R?void 0:R.stakePoolTokenMetadata.metadata.address)&&void 0!==w?w:"",{data:G,isLoading:Y}=t.useSelectedMultiChainAccount(),Z=null!==(P=null==G?void 0:G.identifier)&&void 0!==P?P:"",X=(null==G?void 0:G.type)===o.AccountType.Ledger,J=(0,u.useMemo)((()=>{var e;return(null!==(e=null==G?void 0:G.addresses)&&void 0!==e?e:[]).find((e=>e.networkID===(null==q?void 0:q.data.chain.id)))}),[null==q?void 0:q.data.chain.id,null==G?void 0:G.addresses]),$=null!==(x=null==J?void 0:J.address)&&void 0!==x?x:"",ee=null!==(T=null==J?void 0:J.addressType)&&void 0!==T?T:i.AddressType.Solana,{fungible:te,isLoadingTokens:ne}=h.useGetFungibleBalance({key:Q}),{connection:oe}=a.useSelectedSolanaConnection(),{mutateAsync:re}=(0,d.useProcessTransactionData)({accountSigner:e,connection:oe,storage:n}),ae=(0,u.useMemo)((()=>({topLeft:{label:r.i18next.t("convertStakePendingTitle",{symbol:z})}})),[z]),ie=!Y||!ne,se=(0,u.useCallback)((()=>g(void 0,void 0,void 0,(function*(){try{if(!V)throw new(0,c.StakingError)(c.StakingErrorCodes.MissingTransactionData);const e=yield re({accountIdentifier:Z,ownerAddress:$,pendingActivityRow:ae,activityType:s.PendingTransactionType.ConvertStake,transactionData:V});M(e.id),N(e)}catch(e){_(U);const t=(0,f.parseStakingError)(e);O(t)}}))),[_,M,Z,U,$,ae,re,V]),ue=(0,u.useCallback)((()=>{F(U,R),W(void 0),j(void 0),C()}),[F,W,j,C,R,U]),{isSuccess:ce,isError:de,error:le}=a.useWaitForTransactionConfirmation(ue,L);(0,u.useEffect)((()=>{ce?I("confirmed"):de&&(I("error"),O(le))}),[ce,de,le,L]);const pe=(({txReceipt:e,isTxError:t,poolTokenFungible:n,invalidateQueries:o,dismissConvertFlow:r})=>{const a=(0,l.useLiquidStakingStore)((e=>e.resetStaking)),i=(0,l.useLiquidStakingStore)((e=>e.setNavigateTo)),s=(0,l.useLiquidStakingStore)((e=>e.setSkipDismissRouting)),c=(0,l.useLiquidStakingStore)((e=>e.skipDismissRouting));return(0,u.useCallback)((()=>(a(),!e||t?r():(o(),c?(s(void 0),r()):(i(n?{screen:"FungibleDetail",fungible:n}:{screen:"Activity"}),void r())))),[e,t,n,o,r,i,a,c,s])})({txReceipt:L,isTxError:de,poolTokenFungible:te,invalidateQueries:C,dismissConvertFlow:S}),fe=(0,u.useCallback)((()=>{K(),m()}),[K,m]);return{addressType:ee,isLedger:X,isReadyToExecute:ie,statusPageProps:(0,u.useMemo)((()=>function({stakedTokenSymbol:e,poolTokenSymbol:t,txHash:n,txError:o,confirmationStatus:a,eligibleAccountsCount:i,onDismiss:s,onConvertMore:u}){return o?{type:"error",title:r.i18next.t("convertStakeStatusErrorTitle"),message:r.i18next.t("convertStakeStatusErrorMessage",{poolTokenSymbol:t}),txHash:n,txHashTitle:r.i18next.t("commandViewTransaction"),button:{title:r.i18next.t("commandClose"),onPress:s}}:"confirmed"===a?{type:"success",title:r.i18next.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:t}),learnMoreLink:y,txHash:n,txHashTitle:r.i18next.t("commandViewTransaction"),continueButton:i>1?{title:r.i18next.t("convertStakeStatusConvertMore"),onPress:u}:void 0,closeButton:{title:r.i18next.t("commandClose"),onPress:s}}:{type:"loading",title:r.i18next.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:r.i18next.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:e,poolTokenSymbol:t}),txHash:n,txHashTitle:r.i18next.t("commandViewTransaction"),button:{title:r.i18next.t("commandClose"),onPress:s}}}({stakedTokenSymbol:H,poolTokenSymbol:z,txHash:null==L?void 0:L.id,txError:D,confirmationStatus:E,eligibleAccountsCount:B,onDismiss:pe,onConvertMore:fe})),[H,z,null==L?void 0:L.id,D,E,B,pe,fe]),txError:D,executeConvertStake:se}}})),a.register("890aa",(function(t,n){e(t.exports,"useProcessTransactionData",(function(){return c}),(function(e){return c=e}));var o=a("iOvk1"),r=a("hMVEP"),i=a("7gANb"),s=a("9W7fs"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const c=({accountSigner:e,connection:t,storage:n})=>(0,s.useMutation)({mutationFn:a=>u(void 0,[a],void 0,(function*({accountIdentifier:a,ownerAddress:s,pendingActivityRow:u,activityType:c,transactionData:{networkID:d,transaction:l,signers:p}}){if(o.Chains.isSolanaNetworkID(d)){const o=(yield t.getLatestBlockhash("confirmed")).blockhash;(0,r.setRecentBlockhash)(l,o);const f={ownerAddress:s,networkID:d,data:{signature:""},type:c,display:{summary:u}};return{id:yield(0,i.signAndSendSolanaTransactionAsync)({accountIdentifier:a,feePayer:new(0,r.PublicKey)(s),connection:t,accountSigner:e,transaction:l,pendingTransactionInput:f,storage:n,opts:{additionalSignerAccounts:p}}),networkID:d}}throw new Error(`Unsupported network for liquid staking: ${d}`)}))})})),a.register("7umtj",(function(t,n){e(t.exports,"parseStakingError",(function(){return r}));var o=a("3vaB1");function r(e){return e instanceof o.StakingError?e:new(0,o.StakingError)(o.StakingErrorCodes.UnknownError)}})),a.register("8YG4F",(function(t,n){e(t.exports,"useConvertStakeBannerProps",(function(){return d}));var o=a("43063"),r=a("7mQ3Y"),i=a("29o0l"),s=a("3cJgq"),u=a("i6CYo"),c=a("9pwbm");const d=({fungible:e,accountHooks:t,transactionHooks:n,goToConvertStake:a,getApiEnvironment:d})=>{var l;const{connection:p}=n.useSelectedSolanaConnection(),{data:f}=t.useSelectedChainAddress(r.AddressType.Solana),{data:k=[],isLoading:g}=(0,s.useStakeAccounts)(p,null!==(l=null==f?void 0:f.address)&&void 0!==l?l:""),{trackConvertBannerClicked:y,trackConvertBannerSeen:h}=(0,c.useLiquidStakingAnalytics)();(0,i.useEffect)((()=>{h()}),[]);const{isLoading:v,isSupported:S,initConvertStake:m}=(0,u.useLiquidStaking)(d,e),b=!(g||v)&&S&&k.length>0,A=(0,i.useCallback)((()=>{y(),m(),a()}),[y,m,a]);return{title:o.i18next.t("convertStakeBannerTitle"),canConvertStake:b,onPress:A}}})),a.register("8B6ZJ",(function(t,n){e(t.exports,"createStakeAnalytics",(function(){return i}));var o=a("h0VH5");const r={type:"fungible",isNativeOfType:"sol",chain:a("iOvk1").Chain.Solana,name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},i=e=>new s(e,"stake");class s extends o.SequenceAnalytics{constructor(){super(...arguments),this.createStakeAccountAndDelegateStake=e=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:Object.assign(Object.assign({},e),r)})},this.deactivateStake=()=>{this.analytics.capture("deactivateStake",{data:Object.assign({},r)})}}}class u extends o.SequenceAnalytics{}})),a.register("czeP8",(function(t,n){e(t.exports,"useGetMaxTransferrableSol",(function(){return u}));var o=a("hMVEP"),r=a("7gANb"),i=a("RVqnc"),s=a("jWhdR");const u=({balance:e,cluster:t,rentExemptionMinimum:n})=>{const{data:a}=(0,r.useNetworkFeeSolana)(t),u=(0,s.getMaxTransferrableSol)({numSignatures:11,lamportsPerSignature:a,lamportBalance:(0,i.BigNumber)(e),rentExemptionMinimum:(0,o.solanaToLamports)(n)});return parseFloat((0,o.lamportsToSolana)(u).toFixed(9))}})),a.register("jWhdR",(function(n,o){e(n.exports,"getMaxTransferrableSol",(function(){return i}));var r=a("kAKNF");const i=({numSignatures:e,lamportsPerSignature:n,lamportBalance:o,rentExemptionMinimum:a})=>{const i=t(r)(n).multipliedBy(e),s=o.minus(i);return t(r).max(s.minus(a),0)}})),a.register("fMZSj",(function(t,n){e(t.exports,"stakingShouldDehydrateQueryPredicate",(function(){return r}));const o=[a("7dNLn").LIQUID_STAKING_QUERY_KEYS_PREFIX.supportedTokens],r=e=>{const t=String(e.queryKey[1]);return o.includes(t)}}))}();
//# sourceMappingURL=staking.e599f575.js.map
define=__define;})(window.define);